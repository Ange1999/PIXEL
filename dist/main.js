!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="dist/",n(n.s=23)}([function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(t[r]=n[r])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var a={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var a=0;a<r;a++)t[i+a]=e[n+a]},flattenChunks:function(t){var e,n,r,i,a,o;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(o=new Uint8Array(r),i=0,e=0,n=t.length;e<n;e++)a=t[e],o.set(a,i),i+=a.length;return o}},o={arraySet:function(t,e,n,r,i){for(var a=0;a<r;a++)t[i+a]=e[n+a]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,a)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(r)},function(t,e,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,n){"use strict";t.exports=function(t,e,n,r){for(var i=65535&t|0,a=t>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{a=a+(i=i+e[r++]|0)|0}while(--o);i%=65521,a%=65521}return i|a<<16|0}},function(t,e,n){"use strict";var r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,e,n,i){var a=r,o=i+n;t^=-1;for(var s=i;s<o;s++)t=t>>>8^a[255&(t^e[s])];return-1^t}},function(t,e,n){"use strict";var r=n(0),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){a=!1}for(var o=new r.Buf8(256),s=0;s<256;s++)o[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function l(t,e){if(e<65534&&(t.subarray&&a||!t.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",o=0;o<e;o++)n+=String.fromCharCode(t[o]);return n}o[254]=o[254]=1,e.string2buf=function(t){var e,n,i,a,o,s=t.length,l=0;for(a=0;a<s;a++)55296==(64512&(n=t.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=t.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=new r.Buf8(l),o=0,a=0;o<l;a++)55296==(64512&(n=t.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=t.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|63&n):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|63&n):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|63&n);return e},e.buf2binstring=function(t){return l(t,t.length)},e.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){var n,r,i,a,s=e||t.length,d=new Array(2*s);for(r=0,n=0;n<s;)if((i=t[n++])<128)d[r++]=i;else if((a=o[i])>4)d[r++]=65533,n+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&n<s;)i=i<<6|63&t[n++],a--;a>1?d[r++]=65533:i<65536?d[r++]=i:(i-=65536,d[r++]=55296|i>>10&1023,d[r++]=56320|1023&i)}return l(d,r)},e.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+o[t[n]]>e?n:e}},function(t,e,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,n){var r=n(8),i=n(9);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var a={insert:"head",singleton:!1};r(i,a);t.exports=i.locals||{}},function(t,e,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},a=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function s(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function l(t,e){for(var n={},r=[],i=0;i<t.length;i++){var a=t[i],l=e.base?a[0]+e.base:a[0],d=n[l]||0,c="".concat(l," ").concat(d);n[l]=d+1;var u=s(c),h={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(o[u].references++,o[u].updater(h)):o.push({identifier:c,updater:m(h,e),references:1}),r.push(c)}return r}function d(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var o=a(t.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var c,u=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function h(t,e,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=u(e,i);else{var a=document.createTextNode(i),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}function f(t,e,n){var r=n.css,i=n.media,a=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),a&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var g=null,p=0;function m(t,e){var n,r,i;if(e.singleton){var a=p++;n=g||(g=d(e)),r=h.bind(null,n,a,!1),i=h.bind(null,n,a,!0)}else n=d(e),r=f.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=i());var n=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var i=s(n[r]);o[i].references--}for(var a=l(t,e),d=0;d<n.length;d++){var c=s(n[d]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=a}}}},function(t,e,n){(e=n(10)(!1)).push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Red+Rose:wght@300;600&display=swap);"]),e.push([t.i,"html{ \r\n    overflow:hidden;\r\n}\r\n#body{\r\n    height: 100vh;\r\n    width: 100vw;\r\n    margin: 0;\r\n}\r\nmain{\r\n    display: flex;\r\n}\r\n#header-wrap{\r\n    height: 5vh;\r\n    width: 100vw;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    background: #2D2D2D;\r\n}\r\n#right-sticky-section{\r\n    background-color: #0a0a0fec;\r\n}\r\n#header-wrap h1{\r\n   margin:0;\r\n   margin-left: 30px;\r\n   font-family: 'Red Rose', cursive;\r\n   color: orange;\r\n   font-weight: 600;\r\n   cursor: pointer;\r\n}\r\nh1 a {\r\n    color: orange;\r\n    text-decoration: none ;\r\n}\r\n.instruments{\r\n    width: 40px;\r\n    height: 40px;\r\n    cursor: pointer;\r\n   /* border: 3px solid rgb(56, 52, 52);*/\r\n    margin-right: 5px;\r\n    margin-top: 10px;\r\n   background-color: rgb(141, 136, 125);\r\n}\r\n#wrapper-toolbar{\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    margin-top: 181px;\r\n}\r\n\r\n#toolbar{\r\n    display: flex;\r\n    width: 6vw;\r\n    justify-content: center;\r\n}\r\n\r\n#color-panel{\r\n    display: flex;\r\n    margin-top: 20px;\r\n    flex-direction: row;\r\n}\r\ninput[type=\"color\" i]{\r\n    border: none;\r\n    width: 50px;\r\n    height: 50px;\r\n    cursor: pointer;\r\n    padding: 0;\r\n    background-color: transparent; \r\n}\r\n#right-color{\r\n    position: absolute;\r\n    left: 53px;\r\n    top: 575px;\r\n}\r\n#color{\r\n    position: relative;\r\n}\r\n\r\n\r\n.selectedButton{\r\n    outline: 3px solid orange;\r\n}\r\n#left-sticky-section{\r\n    height: 95vh;\r\n    width: 20vw;\r\n    display: flex;\r\n    flex-direction: row;\r\n    background-color: #0a0a0fec;\r\n}\r\n#drawing-canvas-container{\r\n    height: 95vh;\r\n    width: 60vw;\r\n    background-color: rgb(104, 103, 104);\r\n    display: flex;\r\n    flex-direction: column;\r\n    flex-wrap: wrap;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n#parent-canvas{\r\n    width: 750px;\r\n    height: 750px;\r\n    display: flex;\r\n    flex-flow: row nowrap;\r\n    align-items: center;\r\n    }\r\n#right-sticky-section{\r\n    height: 95vh;\r\n    width: 20vw;\r\n   /* background-color: rgb(89, 89, 90);*/\r\n}\r\n#drawing-canvas{\r\n    background-repeat: round;\r\n    cursor: pointer; \r\n}\r\n\r\n#cabbage-skin-canvas{\r\n    position: absolute;\r\n   \r\n}\r\n#dot-overlay-canvas{\r\n    position: absolute;\r\n    z-index: 1000;\r\n    \r\n}\r\n\r\n#thickness-slider{\r\nwidth: 95px;\r\ncursor: pointer;\r\n}\r\n#commonButtonContainer{\r\n    display: flex;\r\n    margin: 4px;\r\n    flex-direction: column;\r\n    align-items: center;\r\n}\r\n#fps-picture{\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 250px;\r\n    height: 250px;\r\n}\r\n\r\n #display-fps{\r\n    color: orange;\r\n }\r\n\r\n #animatedFrame{  \r\n    width: 100%;\r\n    height: 100%;\r\n }\r\n\r\n\r\n/* #butt-save-img{\r\n    outline: none;\r\n    height: 40px;\r\n    width: 90%;\r\n    border-radius: 2px;  \r\n    transition-duration: 0.4s;\r\n    background-color:rgb(10, 17, 10);\r\n    font-family: 'Red Rose', cursive;\r\n    color: orange;\r\n    font-weight: 400;\r\n    align-items: center;\r\n    justify-content: center;\r\n    opacity: 0.7;\r\n    display: flex;\r\n    border: 1px solid orange;\r\n    cursor: pointer;\r\n    \r\n} */\r\n#butt-delete-img,#butt-save-img {\r\n    outline: none;\r\n    height: 40px;\r\n    width: 90%;\r\n    border-radius: 2px;  \r\n    transition-duration: 0.4s;\r\n    background-color:rgb(10, 17, 10);\r\n    font-family: 'Red Rose', cursive;\r\n    color: orange;\r\n    margin-top: 10px;\r\n    font-weight: 400;\r\n    align-items: center;\r\n    justify-content: center;\r\n    opacity: 0.7;\r\n    display: flex;\r\n    border: 1px solid orange;\r\n    cursor: pointer;\r\n}\r\n#butt-delete-img:hover {\r\n    color: white;\r\n  }\r\n #butt-save-img:hover {\r\n    color: white;\r\n  }\r\n#add-img{\r\n        width: 0.1px;\r\n        height: 0.1px;\r\n        opacity: 0;\r\n        overflow: hidden;\r\n        position: absolute;\r\n        z-index: -1;\r\n    }\r\n#add-img + label {\r\n    margin-top: 20px;\r\n    font-size: 1.25em;\r\n    font-weight: 400;\r\n    color: orange;\r\n    font-family: 'Red Rose', cursive;\r\n    opacity: 0.7;\r\n    display: inline-block;\r\n    cursor: pointer; \r\n}\r\n#add-img + label:hover {\r\n    color: white;\r\n}\r\n#container-resize-settings{\r\n    display: flex;\r\n    align-items: center;\r\n    opacity: 0.7;\r\n\r\n}\r\n  #background{\r\n    margin-top: 20px;\r\n    color: orange;\r\n    font-family: 'Red Rose', cursive;\r\n    font-weight: 400;\r\n}\r\n\r\n#preview-list-wrapper{\r\noverflow-y: scroll;\r\noverflow-x: hidden;\r\nwidth: 14vw;\r\ndisplay: flex;\r\nflex-direction: column;\r\nalign-items: center;\r\n}\r\n#preview-list-wrapper::-webkit-scrollbar {\r\n     width: 7px; \r\n     height: 3px;\r\n    }\r\n\r\n#preview-list-wrapper::-webkit-scrollbar-track {  \r\n    background-color: rgb(50, 49, 54);\r\n    border-radius: 10px;\r\n    margin-top: 1vh;\r\n    margin-bottom: 1vh;\r\n}\r\n#preview-list-wrapper::-webkit-scrollbar-thumb { \r\n     background: rgb(133, 131, 131);\r\n     border-radius: 10px;\r\n    }\r\n\r\n#addFrameButton{\r\n    border-radius: 2px;  \r\n    transition-duration: 0.4s;\r\n    background-color:rgb(10, 17, 10);\r\n    font-family: 'Red Rose', cursive;\r\n    color: orange;\r\n    font-weight: 400;\r\n    align-items: center;\r\n    justify-content: center;\r\n    opacity: 0.7;\r\n    width: 180px;\r\n    height: 40px;\r\n    display: flex;\r\n    border: 1px solid orange;\r\n    cursor: pointer;\r\n    margin-bottom: 10px;\r\n    flex: none;\r\n}\r\n#addFrameButton:hover {\r\n    color: white;\r\n  }\r\n#list-frames{     \r\n    list-style: none;\r\n    margin: 0;\r\n    padding-inline-start: 0;\r\n}\r\n.id-frame{\r\n    position: absolute;\r\n    color: white;\r\n    background-color:rgb(10, 17, 10);\r\n    border: none;\r\n    height: 40px;\r\n    width: 40px;\r\n    top:0;\r\n    left: 0; \r\n    font-family: 'Red Rose', cursive;\r\n    font-weight: 400;\r\n}\r\n.wrapper-frame:hover .deleteFrameButtons{\r\n    display: block;\r\n}\r\n\r\n.wrapper-frame:hover {\r\n    -webkit-transform: scale(1.05);\r\n    -ms-transform: scale(1.05);\r\n    transform: scale(1.05);\r\n  }\r\n.deleteFrameButtons{\r\n    display: none;\r\n    position: absolute;\r\n    border: none;\r\n    height: 40px;\r\n    width: 40px;\r\n    bottom:0;\r\n    right: 0; \r\n    background-color:rgb(85, 85, 85);\r\n    opacity: 0.8;\r\n}\r\n.wrapper-frame:hover .duplicateFrameButtons{\r\n    display: block;\r\n}\r\n.duplicateFrameButtons{\r\n    display: none;\r\n    position: absolute;\r\n    border: none;\r\n    height: 40px;\r\n    width: 40px;\r\n    bottom:0;\r\n    left:0;\r\n    opacity: 0.8;\r\n    background-color:rgb(85, 85, 85);\r\n}\r\n.img-frame{\r\n    width: 180px;\r\n    height: 180px;\r\n    border-radius: 2px; \r\n    border: 1px solid #BAA175;; \r\n}\r\n.wrapper-frame{\r\n    position: relative;\r\n    margin: 14px;\r\n    width: 180px;\r\n    height: 180px;\r\n    }\r\n   \r\n.glyphicon-move {\r\n    cursor: move;\r\n    cursor: -webkit-grabbing;\r\n  }\r\n\r\n\r\n #container-resize-settings{\r\n     display: flex;\r\n     flex-direction: column;\r\n     color: white;\r\n }\r\n\r\n #resize-inputs{\r\n    display: flex;\r\n }\r\n #resize-inputs input{\r\n     width: 20%;\r\n }\r\n #choiceBackground{\r\n    cursor: pointer;\r\n}\r\n ",""]),t.exports=e},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=(o=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),a=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[n].concat(a).concat([i]).join("\n")}var o,s,l;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);r&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},function(t,e,n){(function(e){var r;r={},t.exports=r,function(t,e){t.toRGBA8=function(e){var n=e.width,r=e.height;if(null==e.tabs.acTL)return[t.toRGBA8.decodeImage(e.data,n,r,e).buffer];var i=[];null==e.frames[0].data&&(e.frames[0].data=e.data);for(var a,o=new Uint8Array(n*r*4),s=0;s<e.frames.length;s++){var l=e.frames[s],d=l.rect.x,c=l.rect.y,u=l.rect.width,h=l.rect.height,f=t.toRGBA8.decodeImage(l.data,u,h,e);if(0==s?a=f:0==l.blend?t._copyTile(f,u,h,a,n,r,d,c,0):1==l.blend&&t._copyTile(f,u,h,a,n,r,d,c,1),i.push(a.buffer),a=a.slice(0),0==l.dispose);else if(1==l.dispose)t._copyTile(o,u,h,a,n,r,d,c,0);else if(2==l.dispose){for(var g=s-1;2==e.frames[g].dispose;)g--;a=new Uint8Array(i[g]).slice(0)}}return i},t.toRGBA8.decodeImage=function(e,n,r,i){var a=n*r,o=t.decode._getBPP(i),s=Math.ceil(n*o/8),l=new Uint8Array(4*a),d=new Uint32Array(l.buffer),c=i.ctype,u=i.depth,h=t._bin.readUshort;if(6==c){var f=a<<2;if(8==u)for(var g=0;g<f;g++)l[g]=e[g];if(16==u)for(g=0;g<f;g++)l[g]=e[g<<1]}else if(2==c){var p=i.tabs.tRNS,m=-1,v=-1,b=-1;if(p&&(m=p[0],v=p[1],b=p[2]),8==u)for(g=0;g<a;g++){var _=3*g;l[C=g<<2]=e[_],l[C+1]=e[_+1],l[C+2]=e[_+2],l[C+3]=255,-1!=m&&e[_]==m&&e[_+1]==v&&e[_+2]==b&&(l[C+3]=0)}if(16==u)for(g=0;g<a;g++)_=6*g,l[C=g<<2]=e[_],l[C+1]=e[_+2],l[C+2]=e[_+4],l[C+3]=255,-1!=m&&h(e,_)==m&&h(e,_+2)==v&&h(e,_+4)==b&&(l[C+3]=0)}else if(3==c){var w=i.tabs.PLTE,y=i.tabs.tRNS,k=y?y.length:0;if(1==u)for(var x=0;x<r;x++){var E=x*s,S=x*n;for(g=0;g<n;g++){var C=S+g<<2,I=3*(T=e[E+(g>>3)]>>7-((7&g)<<0)&1);l[C]=w[I],l[C+1]=w[I+1],l[C+2]=w[I+2],l[C+3]=T<k?y[T]:255}}if(2==u)for(x=0;x<r;x++)for(E=x*s,S=x*n,g=0;g<n;g++)C=S+g<<2,I=3*(T=e[E+(g>>2)]>>6-((3&g)<<1)&3),l[C]=w[I],l[C+1]=w[I+1],l[C+2]=w[I+2],l[C+3]=T<k?y[T]:255;if(4==u)for(x=0;x<r;x++)for(E=x*s,S=x*n,g=0;g<n;g++)C=S+g<<2,I=3*(T=e[E+(g>>1)]>>4-((1&g)<<2)&15),l[C]=w[I],l[C+1]=w[I+1],l[C+2]=w[I+2],l[C+3]=T<k?y[T]:255;if(8==u)for(g=0;g<a;g++){var T;C=g<<2,I=3*(T=e[g]),l[C]=w[I],l[C+1]=w[I+1],l[C+2]=w[I+2],l[C+3]=T<k?y[T]:255}}else if(4==c){if(8==u)for(g=0;g<a;g++){C=g<<2;var A=e[B=g<<1];l[C]=A,l[C+1]=A,l[C+2]=A,l[C+3]=e[B+1]}if(16==u)for(g=0;g<a;g++){var B;C=g<<2,A=e[B=g<<2],l[C]=A,l[C+1]=A,l[C+2]=A,l[C+3]=e[B+2]}}else if(0==c){if(m=i.tabs.tRNS?i.tabs.tRNS:-1,1==u)for(g=0;g<a;g++){var D=(A=255*(e[g>>3]>>7-(7&g)&1))==255*m?0:255;d[g]=D<<24|A<<16|A<<8|A}if(2==u)for(g=0;g<a;g++)D=(A=85*(e[g>>2]>>6-((3&g)<<1)&3))==85*m?0:255,d[g]=D<<24|A<<16|A<<8|A;if(4==u)for(g=0;g<a;g++)D=(A=17*(e[g>>1]>>4-((1&g)<<2)&15))==17*m?0:255,d[g]=D<<24|A<<16|A<<8|A;if(8==u)for(g=0;g<a;g++)D=(A=e[g])==m?0:255,d[g]=D<<24|A<<16|A<<8|A;if(16==u)for(g=0;g<a;g++)A=e[g<<1],D=h(e,g<<1)==m?0:255,d[g]=D<<24|A<<16|A<<8|A}return l},t.decode=function(e){for(var n,r=new Uint8Array(e),i=8,a=t._bin,o=a.readUshort,s=a.readUint,l={tabs:{},frames:[]},d=new Uint8Array(r.length),c=0,u=0,h=[137,80,78,71,13,10,26,10],f=0;f<8;f++)if(r[f]!=h[f])throw"The input is not a PNG file!";for(;i<r.length;){var g=a.readUint(r,i);i+=4;var p=a.readASCII(r,i,4);if(i+=4,"IHDR"==p)t.decode._IHDR(r,i,l);else if("IDAT"==p){for(f=0;f<g;f++)d[c+f]=r[i+f];c+=g}else if("acTL"==p)l.tabs[p]={num_frames:s(r,i),num_plays:s(r,i+4)},n=new Uint8Array(r.length);else if("fcTL"==p){0!=u&&((E=l.frames[l.frames.length-1]).data=t.decode._decompress(l,n.slice(0,u),E.rect.width,E.rect.height),u=0);var m={x:s(r,i+12),y:s(r,i+16),width:s(r,i+4),height:s(r,i+8)},v=o(r,i+22);v=o(r,i+20)/(0==v?100:v);var b={rect:m,delay:Math.round(1e3*v),dispose:r[i+24],blend:r[i+25]};l.frames.push(b)}else if("fdAT"==p){for(f=0;f<g-4;f++)n[u+f]=r[i+f+4];u+=g-4}else if("pHYs"==p)l.tabs[p]=[a.readUint(r,i),a.readUint(r,i+4),r[i+8]];else if("cHRM"==p)for(l.tabs[p]=[],f=0;f<8;f++)l.tabs[p].push(a.readUint(r,i+4*f));else if("tEXt"==p){null==l.tabs[p]&&(l.tabs[p]={});var _=a.nextZero(r,i),w=a.readASCII(r,i,_-i),y=a.readASCII(r,_+1,i+g-_-1);l.tabs[p][w]=y}else if("iTXt"==p){null==l.tabs[p]&&(l.tabs[p]={}),_=0;var k=i;_=a.nextZero(r,k),w=a.readASCII(r,k,_-k),r[k=_+1],r[k+1],k+=2,_=a.nextZero(r,k),a.readASCII(r,k,_-k),k=_+1,_=a.nextZero(r,k),a.readUTF8(r,k,_-k),k=_+1,y=a.readUTF8(r,k,g-(k-i)),l.tabs[p][w]=y}else if("PLTE"==p)l.tabs[p]=a.readBytes(r,i,g);else if("hIST"==p){var x=l.tabs.PLTE.length/3;for(l.tabs[p]=[],f=0;f<x;f++)l.tabs[p].push(o(r,i+2*f))}else if("tRNS"==p)3==l.ctype?l.tabs[p]=a.readBytes(r,i,g):0==l.ctype?l.tabs[p]=o(r,i):2==l.ctype&&(l.tabs[p]=[o(r,i),o(r,i+2),o(r,i+4)]);else if("gAMA"==p)l.tabs[p]=a.readUint(r,i)/1e5;else if("sRGB"==p)l.tabs[p]=r[i];else if("bKGD"==p)0==l.ctype||4==l.ctype?l.tabs[p]=[o(r,i)]:2==l.ctype||6==l.ctype?l.tabs[p]=[o(r,i),o(r,i+2),o(r,i+4)]:3==l.ctype&&(l.tabs[p]=r[i]);else if("IEND"==p){var E;0!=u&&((E=l.frames[l.frames.length-1]).data=t.decode._decompress(l,n.slice(0,u),E.rect.width,E.rect.height),u=0),l.data=t.decode._decompress(l,d,l.width,l.height);break}i+=g,a.readUint(r,i),i+=4}return delete l.compress,delete l.interlace,delete l.filter,l},t.decode._decompress=function(e,n,r,i){return 0==e.compress&&(n=t.decode._inflate(n)),0==e.interlace?n=t.decode._filterZero(n,e,0,r,i):1==e.interlace&&(n=t.decode._readInterlace(n,e)),n},t.decode._inflate=function(t){return e.inflate(t)},t.decode._readInterlace=function(e,n){for(var r=n.width,i=n.height,a=t.decode._getBPP(n),o=a>>3,s=Math.ceil(r*a/8),l=new Uint8Array(i*s),d=0,c=[0,0,4,0,2,0,1],u=[0,4,0,2,0,1,0],h=[8,8,8,4,4,2,2],f=[8,8,4,4,2,2,1],g=0;g<7;){for(var p=h[g],m=f[g],v=0,b=0,_=c[g];_<i;)_+=p,b++;for(var w=u[g];w<r;)w+=m,v++;var y=Math.ceil(v*a/8);t.decode._filterZero(e,n,d,v,b);for(var k=0,x=c[g];x<i;){for(var E=u[g],S=d+k*y<<3;E<r;){var C;if(1==a&&(C=(C=e[S>>3])>>7-(7&S)&1,l[x*s+(E>>3)]|=C<<7-((3&E)<<0)),2==a&&(C=(C=e[S>>3])>>6-(7&S)&3,l[x*s+(E>>2)]|=C<<6-((3&E)<<1)),4==a&&(C=(C=e[S>>3])>>4-(7&S)&15,l[x*s+(E>>1)]|=C<<4-((1&E)<<2)),a>=8)for(var I=x*s+E*o,T=0;T<o;T++)l[I+T]=e[(S>>3)+T];S+=a,E+=m}k++,x+=p}v*b!=0&&(d+=b*(1+y)),g+=1}return l},t.decode._getBPP=function(t){return[1,null,3,1,2,null,4][t.ctype]*t.depth},t.decode._filterZero=function(e,n,r,i,a){var o=t.decode._getBPP(n),s=Math.ceil(i*o/8),l=t.decode._paeth;o=Math.ceil(o/8);for(var d=0;d<a;d++){var c=r+d*s,u=c+d+1,h=e[u-1];if(0==h)for(var f=0;f<s;f++)e[c+f]=e[u+f];else if(1==h){for(f=0;f<o;f++)e[c+f]=e[u+f];for(f=o;f<s;f++)e[c+f]=e[u+f]+e[c+f-o]&255}else if(0==d){for(f=0;f<o;f++)e[c+f]=e[u+f];if(2==h)for(f=o;f<s;f++)e[c+f]=255&e[u+f];if(3==h)for(f=o;f<s;f++)e[c+f]=e[u+f]+(e[c+f-o]>>1)&255;if(4==h)for(f=o;f<s;f++)e[c+f]=e[u+f]+l(e[c+f-o],0,0)&255}else{if(2==h)for(f=0;f<s;f++)e[c+f]=e[u+f]+e[c+f-s]&255;if(3==h){for(f=0;f<o;f++)e[c+f]=e[u+f]+(e[c+f-s]>>1)&255;for(f=o;f<s;f++)e[c+f]=e[u+f]+(e[c+f-s]+e[c+f-o]>>1)&255}if(4==h){for(f=0;f<o;f++)e[c+f]=e[u+f]+l(0,e[c+f-s],0)&255;for(f=o;f<s;f++)e[c+f]=e[u+f]+l(e[c+f-o],e[c+f-s],e[c+f-o-s])&255}}}return e},t.decode._paeth=function(t,e,n){var r=t+e-n,i=Math.abs(r-t),a=Math.abs(r-e),o=Math.abs(r-n);return i<=a&&i<=o?t:a<=o?e:n},t.decode._IHDR=function(e,n,r){var i=t._bin;r.width=i.readUint(e,n),n+=4,r.height=i.readUint(e,n),n+=4,r.depth=e[n],n++,r.ctype=e[n],n++,r.compress=e[n],n++,r.filter=e[n],n++,r.interlace=e[n],n++},t._bin={nextZero:function(t,e){for(;0!=t[e];)e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},writeUshort:function(t,e,n){t[e]=n>>8&255,t[e+1]=255&n},readUint:function(t,e){return 16777216*t[e]+(t[e+1]<<16|t[e+2]<<8|t[e+3])},writeUint:function(t,e,n){t[e]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n},readASCII:function(t,e,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(t[e+i]);return r},writeASCII:function(t,e,n){for(var r=0;r<n.length;r++)t[e+r]=n.charCodeAt(r)},readBytes:function(t,e,n){for(var r=[],i=0;i<n;i++)r.push(t[e+i]);return r},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(e,n,r){for(var i,a="",o=0;o<r;o++)a+="%"+t._bin.pad(e[n+o].toString(16));try{i=decodeURIComponent(a)}catch(i){return t._bin.readASCII(e,n,r)}return i}},t._copyTile=function(t,e,n,r,i,a,o,s,l){for(var d=Math.min(e,i),c=Math.min(n,a),u=0,h=0,f=0;f<c;f++)for(var g=0;g<d;g++)if(o>=0&&s>=0?(u=f*e+g<<2,h=(s+f)*i+o+g<<2):(u=(-s+f)*e-o+g<<2,h=f*i+g<<2),0==l)r[h]=t[u],r[h+1]=t[u+1],r[h+2]=t[u+2],r[h+3]=t[u+3];else if(1==l){var p=t[u+3]*(1/255),m=t[u]*p,v=t[u+1]*p,b=t[u+2]*p,_=r[h+3]*(1/255),w=r[h]*_,y=r[h+1]*_,k=r[h+2]*_,x=1-p,E=p+_*x,S=0==E?0:1/E;r[h+3]=255*E,r[h+0]=(m+w*x)*S,r[h+1]=(v+y*x)*S,r[h+2]=(b+k*x)*S}else if(2==l)p=t[u+3],m=t[u],v=t[u+1],b=t[u+2],_=r[h+3],w=r[h],y=r[h+1],k=r[h+2],p==_&&m==w&&v==y&&b==k?(r[h]=0,r[h+1]=0,r[h+2]=0,r[h+3]=0):(r[h]=m,r[h+1]=v,r[h+2]=b,r[h+3]=p);else if(3==l){if(p=t[u+3],m=t[u],v=t[u+1],b=t[u+2],_=r[h+3],w=r[h],y=r[h+1],k=r[h+2],p==_&&m==w&&v==y&&b==k)continue;if(p<220&&_>20)return!1}return!0},t.encode=function(e,n,r,i,a,o){null==i&&(i=0),null==o&&(o=!1);for(var s=new Uint8Array(e[0].byteLength*e.length+100),l=[137,80,78,71,13,10,26,10],d=0;d<8;d++)s[d]=l[d];var c=8,u=t._bin,h=t.crc.crc,f=u.writeUint,g=u.writeUshort,p=u.writeASCII,m=t.encode.compressPNG(e,n,r,i,o);f(s,c,13),p(s,c+=4,"IHDR"),f(s,c+=4,n),f(s,c+=4,r),s[c+=4]=m.depth,s[++c]=m.ctype,s[++c]=0,s[++c]=0,s[++c]=0,f(s,++c,h(s,c-17,17)),f(s,c+=4,1),p(s,c+=4,"sRGB"),s[c+=4]=1,f(s,++c,h(s,c-5,5)),c+=4;var v=e.length>1;if(v&&(f(s,c,8),p(s,c+=4,"acTL"),f(s,c+=4,e.length),f(s,c+=4,0),f(s,c+=4,h(s,c-12,12)),c+=4),3==m.ctype){for(f(s,c,3*(C=m.plte.length)),p(s,c+=4,"PLTE"),c+=4,d=0;d<C;d++){var b=3*d,_=m.plte[d],w=255&_,y=_>>8&255,k=_>>16&255;s[c+b+0]=w,s[c+b+1]=y,s[c+b+2]=k}if(f(s,c+=3*C,h(s,c-3*C-4,3*C+4)),c+=4,m.gotAlpha){for(f(s,c,C),p(s,c+=4,"tRNS"),c+=4,d=0;d<C;d++)s[c+d]=m.plte[d]>>24&255;f(s,c+=C,h(s,c-C-4,C+4)),c+=4}}for(var x=0,E=0;E<m.frames.length;E++){var S=m.frames[E];v&&(f(s,c,26),p(s,c+=4,"fcTL"),f(s,c+=4,x++),f(s,c+=4,S.rect.width),f(s,c+=4,S.rect.height),f(s,c+=4,S.rect.x),f(s,c+=4,S.rect.y),g(s,c+=4,a[E]),g(s,c+=2,1e3),s[c+=2]=S.dispose,s[++c]=S.blend,f(s,++c,h(s,c-30,30)),c+=4);var C,I=S.cimg;f(s,c,(C=I.length)+(0==E?0:4));var T=c+=4;for(p(s,c,0==E?"IDAT":"fdAT"),c+=4,0!=E&&(f(s,c,x++),c+=4),d=0;d<C;d++)s[c+d]=I[d];f(s,c+=C,h(s,T,c-T)),c+=4}return f(s,c,0),p(s,c+=4,"IEND"),f(s,c+=4,h(s,c-4,4)),c+=4,s.buffer.slice(0,c)},t.encode.compressPNG=function(e,n,r,i,a){for(var o=t.encode.compress(e,n,r,i,!1,a),s=0;s<e.length;s++){var l=o.frames[s],d=(l.rect.width,l.rect.height),c=l.bpl,u=l.bpp,h=new Uint8Array(d*c+d);l.cimg=t.encode._filterZero(l.img,d,u,c,h)}return o},t.encode.compress=function(e,n,r,i,a,o){null==o&&(o=!1);for(var s=6,l=8,d=4,c=255,u=0;u<e.length;u++)for(var h=new Uint8Array(e[u]),f=h.length,g=0;g<f;g+=4)c&=h[g+3];var p=255!=c,m={},v=[];if(0!=e.length&&(m[0]=0,v.push(0),0!=i&&i--),0!=i){var b=t.quantize(e,i,a);for(e=b.bufs,g=0;g<b.plte.length;g++)null==m[w=b.plte[g].est.rgba]&&(m[w]=v.length,v.push(w))}else for(u=0;u<e.length;u++){var _=new Uint32Array(e[u]);for(f=_.length,g=0;g<f;g++){var w=_[g];if((g<n||w!=_[g-1]&&w!=_[g-n])&&null==m[w]&&(m[w]=v.length,v.push(w),v.length>=300))break}}var y=!!p&&a,k=v.length;k<=256&&0==o&&(l=k<=2?1:k<=4?2:k<=16?4:8,a&&(l=8),p=!0);var x=[];for(u=0;u<e.length;u++){var E=new Uint8Array(e[u]),S=new Uint32Array(E.buffer),C=0,I=0,T=n,A=r,B=0;if(0!=u&&!y){for(var D=a||1==u||2==x[x.length-2].dispose?1:2,z=0,R=1e9,M=0;M<D;M++){for(var N=new Uint8Array(e[u-1-M]),F=new Uint32Array(e[u-1-M]),L=n,P=r,O=-1,U=-1,Z=0;Z<r;Z++)for(var j=0;j<n;j++)S[g=Z*n+j]!=F[g]&&(j<L&&(L=j),j>O&&(O=j),Z<P&&(P=Z),Z>U&&(U=Z));var H=-1==O?1:(O-L+1)*(U-P+1);H<R&&(R=H,z=M,-1==O?(C=I=0,T=A=1):(C=L,I=P,T=O-L+1,A=U-P+1))}N=new Uint8Array(e[u-1-z]),1==z&&(x[x.length-1].dispose=2);var X=new Uint8Array(T*A*4);new Uint32Array(X.buffer),t._copyTile(N,n,r,X,T,A,-C,-I,0),t._copyTile(E,n,r,X,T,A,-C,-I,3)?(t._copyTile(E,n,r,X,T,A,-C,-I,2),B=1):(t._copyTile(E,n,r,X,T,A,-C,-I,0),B=0),E=X,S=new Uint32Array(E.buffer)}var Y=4*T;if(k<=256&&0==o){for(Y=Math.ceil(l*T/8),X=new Uint8Array(Y*A),Z=0;Z<A;Z++){g=Z*Y;var q=Z*T;if(8==l)for(j=0;j<T;j++)X[g+j]=m[S[q+j]];else if(4==l)for(j=0;j<T;j++)X[g+(j>>1)]|=m[S[q+j]]<<4-4*(1&j);else if(2==l)for(j=0;j<T;j++)X[g+(j>>2)]|=m[S[q+j]]<<6-2*(3&j);else if(1==l)for(j=0;j<T;j++)X[g+(j>>3)]|=m[S[q+j]]<<7-1*(7&j)}E=X,s=3,d=1}else if(0==p&&1==e.length){X=new Uint8Array(T*A*3);var W=T*A;for(g=0;g<W;g++){var G=3*g,$=4*g;X[G]=E[$],X[G+1]=E[$+1],X[G+2]=E[$+2]}E=X,s=2,d=3,Y=3*T}x.push({rect:{x:C,y:I,width:T,height:A},img:E,bpl:Y,bpp:d,blend:B,dispose:y?1:0})}return{ctype:s,depth:l,plte:v,gotAlpha:p,frames:x}},t.encode._filterZero=function(n,r,i,a,o){for(var s=[],l=0;l<5;l++)if(!(r*a>5e5)||2!=l&&3!=l&&4!=l){for(var d=0;d<r;d++)t.encode._filterLine(o,n,d,a,i,l);if(s.push(e.deflate(o)),1==i)break}for(var c,u=1e9,h=0;h<s.length;h++)s[h].length<u&&(c=h,u=s[h].length);return s[c]},t.encode._filterLine=function(e,n,r,i,a,o){var s=r*i,l=s+r,d=t.decode._paeth;if(e[l]=o,l++,0==o)for(var c=0;c<i;c++)e[l+c]=n[s+c];else if(1==o){for(c=0;c<a;c++)e[l+c]=n[s+c];for(c=a;c<i;c++)e[l+c]=n[s+c]-n[s+c-a]+256&255}else if(0==r){for(c=0;c<a;c++)e[l+c]=n[s+c];if(2==o)for(c=a;c<i;c++)e[l+c]=n[s+c];if(3==o)for(c=a;c<i;c++)e[l+c]=n[s+c]-(n[s+c-a]>>1)+256&255;if(4==o)for(c=a;c<i;c++)e[l+c]=n[s+c]-d(n[s+c-a],0,0)+256&255}else{if(2==o)for(c=0;c<i;c++)e[l+c]=n[s+c]+256-n[s+c-i]&255;if(3==o){for(c=0;c<a;c++)e[l+c]=n[s+c]+256-(n[s+c-i]>>1)&255;for(c=a;c<i;c++)e[l+c]=n[s+c]+256-(n[s+c-i]+n[s+c-a]>>1)&255}if(4==o){for(c=0;c<a;c++)e[l+c]=n[s+c]+256-d(0,n[s+c-i],0)&255;for(c=a;c<i;c++)e[l+c]=n[s+c]+256-d(n[s+c-a],n[s+c-i],n[s+c-a-i])&255}}},t.crc={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var n=e,r=0;r<8;r++)1&n?n=3988292384^n>>>1:n>>>=1;t[e]=n}return t}(),update:function(e,n,r,i){for(var a=0;a<i;a++)e=t.crc.table[255&(e^n[r+a])]^e>>>8;return e},crc:function(e,n,r){return 4294967295^t.crc.update(4294967295,e,n,r)}},t.quantize=function(e,n,r){for(var i=[],a=0,o=0;o<e.length;o++)i.push(t.encode.alphaMul(new Uint8Array(e[o]),r)),a+=e[o].byteLength;var s=new Uint8Array(a),l=new Uint32Array(s.buffer),d=0;for(o=0;o<i.length;o++){for(var c=i[o],u=c.length,h=0;h<u;h++)s[d+h]=c[h];d+=u}var f={i0:0,i1:s.length,bst:null,est:null,tdst:0,left:null,right:null};f.bst=t.quantize.stats(s,f.i0,f.i1),f.est=t.quantize.estats(f.bst);for(var g=[f];g.length<n;){var p=0,m=0;for(o=0;o<g.length;o++)g[o].est.L>p&&(p=g[o].est.L,m=o);if(p<.001)break;var v=g[m],b=t.quantize.splitPixels(s,l,v.i0,v.i1,v.est.e,v.est.eMq255),_={i0:v.i0,i1:b,bst:null,est:null,tdst:0,left:null,right:null};_.bst=t.quantize.stats(s,_.i0,_.i1),_.est=t.quantize.estats(_.bst);var w={i0:b,i1:v.i1,bst:null,est:null,tdst:0,left:null,right:null};for(w.bst={R:[],m:[],N:v.bst.N-_.bst.N},o=0;o<16;o++)w.bst.R[o]=v.bst.R[o]-_.bst.R[o];for(o=0;o<4;o++)w.bst.m[o]=v.bst.m[o]-_.bst.m[o];w.est=t.quantize.estats(w.bst),v.left=_,v.right=w,g[m]=_,g.push(w)}g.sort((function(t,e){return e.bst.N-t.bst.N}));for(var y=0;y<i.length;y++){var k=t.quantize.planeDst,x=new Uint8Array(i[y].buffer),E=new Uint32Array(i[y].buffer),S=x.length;for(o=0;o<S;o+=4){for(var C=x[o]*(1/255),I=x[o+1]*(1/255),T=x[o+2]*(1/255),A=x[o+3]*(1/255),B=f;B.left;)B=k(B.est,C,I,T,A)<=0?B.left:B.right;E[o>>2]=B.est.rgba}i[y]=E.buffer}return{bufs:i,plte:g}},t.quantize.getNearest=function(e,n,r,i,a){if(null==e.left)return e.tdst=t.quantize.dist(e.est.q,n,r,i,a),e;var o=t.quantize.planeDst(e.est,n,r,i,a),s=e.left,l=e.right;o>0&&(s=e.right,l=e.left);var d=t.quantize.getNearest(s,n,r,i,a);if(d.tdst<=o*o)return d;var c=t.quantize.getNearest(l,n,r,i,a);return c.tdst<d.tdst?c:d},t.quantize.planeDst=function(t,e,n,r,i){var a=t.e;return a[0]*e+a[1]*n+a[2]*r+a[3]*i-t.eMq},t.quantize.dist=function(t,e,n,r,i){var a=e-t[0],o=n-t[1],s=r-t[2],l=i-t[3];return a*a+o*o+s*s+l*l},t.quantize.splitPixels=function(e,n,r,i,a,o){var s=t.quantize.vecDot;for(i-=4;r<i;){for(;s(e,r,a)<=o;)r+=4;for(;s(e,i,a)>o;)i-=4;if(r>=i)break;var l=n[r>>2];n[r>>2]=n[i>>2],n[i>>2]=l,r+=4,i-=4}for(;s(e,r,a)>o;)r-=4;return r+4},t.quantize.vecDot=function(t,e,n){return t[e]*n[0]+t[e+1]*n[1]+t[e+2]*n[2]+t[e+3]*n[3]},t.quantize.stats=function(t,e,n){for(var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0],a=n-e>>2,o=e;o<n;o+=4){var s=t[o]*(1/255),l=t[o+1]*(1/255),d=t[o+2]*(1/255),c=t[o+3]*(1/255);i[0]+=s,i[1]+=l,i[2]+=d,i[3]+=c,r[0]+=s*s,r[1]+=s*l,r[2]+=s*d,r[3]+=s*c,r[5]+=l*l,r[6]+=l*d,r[7]+=l*c,r[10]+=d*d,r[11]+=d*c,r[15]+=c*c}return r[4]=r[1],r[8]=r[2],r[12]=r[3],r[9]=r[6],r[13]=r[7],r[14]=r[11],{R:r,m:i,N:a}},t.quantize.estats=function(e){var n=e.R,r=e.m,i=e.N,a=r[0],o=r[1],s=r[2],l=r[3],d=0==i?0:1/i,c=[n[0]-a*a*d,n[1]-a*o*d,n[2]-a*s*d,n[3]-a*l*d,n[4]-o*a*d,n[5]-o*o*d,n[6]-o*s*d,n[7]-o*l*d,n[8]-s*a*d,n[9]-s*o*d,n[10]-s*s*d,n[11]-s*l*d,n[12]-l*a*d,n[13]-l*o*d,n[14]-l*s*d,n[15]-l*l*d],u=c,h=t.M4,f=[.5,.5,.5,.5],g=0,p=0;if(0!=i)for(var m=0;m<10&&(f=h.multVec(u,f),p=Math.sqrt(h.dot(f,f)),f=h.sml(1/p,f),!(Math.abs(p-g)<1e-9));m++)g=p;var v=[a*d,o*d,s*d,l*d],b=h.dot(h.sml(255,v),f),_=v[3]<.001?0:1/v[3];return{Cov:c,q:v,e:f,L:g,eMq255:b,eMq:h.dot(f,v),rgba:(Math.round(255*v[3])<<24|Math.round(255*v[2]*_)<<16|Math.round(255*v[1]*_)<<8|Math.round(255*v[0]*_)<<0)>>>0}},t.M4={multVec:function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],t[4]*e[0]+t[5]*e[1]+t[6]*e[2]+t[7]*e[3],t[8]*e[0]+t[9]*e[1]+t[10]*e[2]+t[11]*e[3],t[12]*e[0]+t[13]*e[1]+t[14]*e[2]+t[15]*e[3]]},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},sml:function(t,e){return[t*e[0],t*e[1],t*e[2],t*e[3]]}},t.encode.alphaMul=function(t,e){for(var n=new Uint8Array(t.length),r=t.length>>2,i=0;i<r;i++){var a=i<<2,o=t[a+3];e&&(o=o<128?0:255);var s=o*(1/255);n[a+0]=t[a+0]*s,n[a+1]=t[a+1]*s,n[a+2]=t[a+2]*s,n[a+3]=o}return n}}(r,n(13))}).call(this,n(12))},function(t,e){var n,r,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(t){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var l,d=[],c=!1,u=-1;function h(){c&&l&&(c=!1,l.length?d=l.concat(d):u=-1,d.length&&f())}function f(){if(!c){var t=s(h);c=!0;for(var e=d.length;e;){for(l=d,d=[];++u<e;)l&&l[u].run();u=-1,e=d.length}l=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function p(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new g(t,e)),1!==d.length||c||s(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";var r={};(0,n(0).assign)(r,n(14),n(17),n(6)),t.exports=r},function(t,e,n){"use strict";var r=n(15),i=n(0),a=n(4),o=n(1),s=n(5),l=Object.prototype.toString;function d(t){if(!(this instanceof d))return new d(t);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==n)throw new Error(o[n]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){var c;if(c="string"==typeof e.dictionary?a.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(n=r.deflateSetDictionary(this.strm,c)))throw new Error(o[n]);this._dict_set=!0}}function c(t,e){var n=new d(e);if(n.push(t,!0),n.err)throw n.msg||o[n.err];return n.result}d.prototype.push=function(t,e){var n,o,s=this.strm,d=this.options.chunkSize;if(this.ended)return!1;o=e===~~e?e:!0===e?4:0,"string"==typeof t?s.input=a.string2buf(t):"[object ArrayBuffer]"===l.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(d),s.next_out=0,s.avail_out=d),1!==(n=r.deflate(s,o))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(a.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==n);return 4===o?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==o||(this.onEnd(0),s.avail_out=0,!0)},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=d,e.deflate=c,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,c(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,c(t,e)}},function(t,e,n){"use strict";var r,i=n(0),a=n(16),o=n(2),s=n(3),l=n(1);function d(t,e){return t.msg=l[e],e}function c(t){return(t<<1)-(t>4?9:0)}function u(t){for(var e=t.length;--e>=0;)t[e]=0}function h(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(i.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function f(t,e){a._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,h(t.strm)}function g(t,e){t.pending_buf[t.pending++]=e}function p(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function m(t,e){var n,r,i=t.max_chain_length,a=t.strstart,o=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,d=t.window,c=t.w_mask,u=t.prev,h=t.strstart+258,f=d[a+o-1],g=d[a+o];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(d[(n=e)+o]===g&&d[n+o-1]===f&&d[n]===d[a]&&d[++n]===d[a+1]){a+=2,n++;do{}while(d[++a]===d[++n]&&d[++a]===d[++n]&&d[++a]===d[++n]&&d[++a]===d[++n]&&d[++a]===d[++n]&&d[++a]===d[++n]&&d[++a]===d[++n]&&d[++a]===d[++n]&&a<h);if(r=258-(h-a),a=h-258,r>o){if(t.match_start=e,o=r,r>=s)break;f=d[a+o-1],g=d[a+o]}}}while((e=u[e&c])>l&&0!=--i);return o<=t.lookahead?o:t.lookahead}function v(t){var e,n,r,a,l,d,c,u,h,f,g=t.w_size;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=g+(g-262)){i.arraySet(t.window,t.window,g,g,0),t.match_start-=g,t.strstart-=g,t.block_start-=g,e=n=t.hash_size;do{r=t.head[--e],t.head[e]=r>=g?r-g:0}while(--n);e=n=g;do{r=t.prev[--e],t.prev[e]=r>=g?r-g:0}while(--n);a+=g}if(0===t.strm.avail_in)break;if(d=t.strm,c=t.window,u=t.strstart+t.lookahead,h=a,f=void 0,(f=d.avail_in)>h&&(f=h),n=0===f?0:(d.avail_in-=f,i.arraySet(c,d.input,d.next_in,f,u),1===d.state.wrap?d.adler=o(d.adler,c,f,u):2===d.state.wrap&&(d.adler=s(d.adler,c,f,u)),d.next_in+=f,d.total_in+=f,f),t.lookahead+=n,t.lookahead+t.insert>=3)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+3-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function b(t,e){for(var n,r;;){if(t.lookahead<262){if(v(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-262&&(t.match_length=m(t,n)),t.match_length>=3)if(r=a._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(f(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(f(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(f(t,!1),0===t.strm.avail_out)?1:2}function _(t,e){for(var n,r,i;;){if(t.lookahead<262){if(v(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-262&&(t.match_length=m(t,n),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,r=a._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(f(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=a._tr_tally(t,0,t.window[t.strstart-1]))&&f(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=a._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(f(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(f(t,!1),0===t.strm.avail_out)?1:2}function w(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),u(this.dyn_ltree),u(this.dyn_dtree),u(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),u(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),u(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function k(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,a._tr_init(e),0):d(t,-2)}function x(t){var e,n=k(t);return 0===n&&((e=t.state).window_size=2*e.w_size,u(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),n}function E(t,e,n,r,a,o){if(!t)return-2;var s=1;if(-1===e&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),a<1||a>9||8!==n||r<8||r>15||e<0||e>9||o<0||o>4)return d(t,-2);8===r&&(r=9);var l=new y;return t.state=l,l.strm=t,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=o,l.method=n,x(t)}r=[new w(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(v(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,f(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(f(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(f(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(f(t,!1),t.strm.avail_out),1)})),new w(4,4,8,4,b),new w(4,5,16,8,b),new w(4,6,32,32,b),new w(4,4,16,16,_),new w(8,16,32,32,_),new w(8,16,128,128,_),new w(8,32,128,256,_),new w(32,128,258,1024,_),new w(32,258,258,4096,_)],e.deflateInit=function(t,e){return E(t,e,8,15,8,0)},e.deflateInit2=E,e.deflateReset=x,e.deflateResetKeep=k,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},e.deflate=function(t,e){var n,i,o,l;if(!t||!t.state||e>5||e<0)return t?d(t,-2):-2;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return d(t,0===t.avail_out?-5:-2);if(i.strm=t,n=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,g(i,31),g(i,139),g(i,8),i.gzhead?(g(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),g(i,255&i.gzhead.time),g(i,i.gzhead.time>>8&255),g(i,i.gzhead.time>>16&255),g(i,i.gzhead.time>>24&255),g(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),g(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(g(i,255&i.gzhead.extra.length),g(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=s(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(g(i,0),g(i,0),g(i,0),g(i,0),g(i,0),g(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),g(i,3),i.status=113);else{var m=8+(i.w_bits-8<<4)<<8;m|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(m|=32),m+=31-m%31,i.status=113,p(i,m),0!==i.strstart&&(p(i,t.adler>>>16),p(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),h(t),o=i.pending,i.pending!==i.pending_buf_size));)g(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),h(t),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,g(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),h(t),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,g(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&h(t),i.pending+2<=i.pending_buf_size&&(g(i,255&t.adler),g(i,t.adler>>8&255),t.adler=0,i.status=113)):i.status=113),0!==i.pending){if(h(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&c(e)<=c(n)&&4!==e)return d(t,-5);if(666===i.status&&0!==t.avail_in)return d(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&666!==i.status){var b=2===i.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(v(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,n=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(f(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(f(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(f(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var n,r,i,o,s=t.window;;){if(t.lookahead<=258){if(v(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=s[i=t.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){o=t.strstart+258;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);t.match_length=258-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=a._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(f(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(f(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(f(t,!1),0===t.strm.avail_out)?1:2}(i,e):r[i.level].func(i,e);if(3!==b&&4!==b||(i.status=666),1===b||3===b)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===b&&(1===e?a._tr_align(i):5!==e&&(a._tr_stored_block(i,0,0,!1),3===e&&(u(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),h(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(g(i,255&t.adler),g(i,t.adler>>8&255),g(i,t.adler>>16&255),g(i,t.adler>>24&255),g(i,255&t.total_in),g(i,t.total_in>>8&255),g(i,t.total_in>>16&255),g(i,t.total_in>>24&255)):(p(i,t.adler>>>16),p(i,65535&t.adler)),h(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},e.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?d(t,-2):(t.state=null,113===e?d(t,-3):0):-2},e.deflateSetDictionary=function(t,e){var n,r,a,s,l,d,c,h,f=e.length;if(!t||!t.state)return-2;if(2===(s=(n=t.state).wrap)||1===s&&42!==n.status||n.lookahead)return-2;for(1===s&&(t.adler=o(t.adler,e,f,0)),n.wrap=0,f>=n.w_size&&(0===s&&(u(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new i.Buf8(n.w_size),i.arraySet(h,e,f-n.w_size,n.w_size,0),e=h,f=n.w_size),l=t.avail_in,d=t.next_in,c=t.input,t.avail_in=f,t.next_in=0,t.input=e,v(n);n.lookahead>=3;){r=n.strstart,a=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--a);n.strstart=r,n.lookahead=2,v(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=d,t.input=c,t.avail_in=l,n.wrap=s,0},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,n){"use strict";var r=n(0);function i(t){for(var e=t.length;--e>=0;)t[e]=0}var a=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],o=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],d=new Array(576);i(d);var c=new Array(60);i(c);var u=new Array(512);i(u);var h=new Array(256);i(h);var f=new Array(29);i(f);var g,p,m,v=new Array(30);function b(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function _(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function w(t){return t<256?u[t]:u[256+(t>>>7)]}function y(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function k(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,y(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function x(t,e,n){k(t,n[2*e],n[2*e+1])}function E(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function S(t,e,n){var r,i,a=new Array(16),o=0;for(r=1;r<=15;r++)a[r]=o=o+n[r-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=E(a[s]++,s))}}function C(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function I(t){t.bi_valid>8?y(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function T(t,e,n,r){var i=2*e,a=2*n;return t[i]<t[a]||t[i]===t[a]&&r[e]<=r[n]}function A(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&T(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!T(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function B(t,e,n){var r,i,s,l,d=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*d]<<8|t.pending_buf[t.d_buf+2*d+1],i=t.pending_buf[t.l_buf+d],d++,0===r?x(t,i,e):(x(t,(s=h[i])+256+1,e),0!==(l=a[s])&&k(t,i-=f[s],l),x(t,s=w(--r),n),0!==(l=o[s])&&k(t,r-=v[s],l))}while(d<t.last_lit);x(t,256,e)}function D(t,e){var n,r,i,a=e.dyn_tree,o=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,d=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<l;n++)0!==a[2*n]?(t.heap[++t.heap_len]=d=n,t.depth[n]=0):a[2*n+1]=0;for(;t.heap_len<2;)a[2*(i=t.heap[++t.heap_len]=d<2?++d:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=o[2*i+1]);for(e.max_code=d,n=t.heap_len>>1;n>=1;n--)A(t,a,n);i=l;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],A(t,a,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,a[2*i]=a[2*n]+a[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,a[2*n+1]=a[2*r+1]=i,t.heap[1]=i++,A(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,a,o,s,l=e.dyn_tree,d=e.max_code,c=e.stat_desc.static_tree,u=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,g=e.stat_desc.max_length,p=0;for(a=0;a<=15;a++)t.bl_count[a]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(a=l[2*l[2*(r=t.heap[n])+1]+1]+1)>g&&(a=g,p++),l[2*r+1]=a,r>d||(t.bl_count[a]++,o=0,r>=f&&(o=h[r-f]),s=l[2*r],t.opt_len+=s*(a+o),u&&(t.static_len+=s*(c[2*r+1]+o)));if(0!==p){do{for(a=g-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[g]--,p-=2}while(p>0);for(a=g;0!==a;a--)for(r=t.bl_count[a];0!==r;)(i=t.heap[--n])>d||(l[2*i+1]!==a&&(t.opt_len+=(a-l[2*i+1])*l[2*i],l[2*i+1]=a),r--)}}(t,e),S(a,d,t.bl_count)}function z(t,e,n){var r,i,a=-1,o=e[1],s=0,l=7,d=4;for(0===o&&(l=138,d=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=e[2*(r+1)+1],++s<l&&i===o||(s<d?t.bl_tree[2*i]+=s:0!==i?(i!==a&&t.bl_tree[2*i]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=0,a=i,0===o?(l=138,d=3):i===o?(l=6,d=3):(l=7,d=4))}function R(t,e,n){var r,i,a=-1,o=e[1],s=0,l=7,d=4;for(0===o&&(l=138,d=3),r=0;r<=n;r++)if(i=o,o=e[2*(r+1)+1],!(++s<l&&i===o)){if(s<d)do{x(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(x(t,i,t.bl_tree),s--),x(t,16,t.bl_tree),k(t,s-3,2)):s<=10?(x(t,17,t.bl_tree),k(t,s-3,3)):(x(t,18,t.bl_tree),k(t,s-11,7));s=0,a=i,0===o?(l=138,d=3):i===o?(l=6,d=3):(l=7,d=4)}}i(v);var M=!1;function N(t,e,n,i){k(t,0+(i?1:0),3),function(t,e,n,i){I(t),i&&(y(t,n),y(t,~n)),r.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}e._tr_init=function(t){M||(!function(){var t,e,n,r,i,l=new Array(16);for(n=0,r=0;r<28;r++)for(f[r]=n,t=0;t<1<<a[r];t++)h[n++]=r;for(h[n-1]=r,i=0,r=0;r<16;r++)for(v[r]=i,t=0;t<1<<o[r];t++)u[i++]=r;for(i>>=7;r<30;r++)for(v[r]=i<<7,t=0;t<1<<o[r]-7;t++)u[256+i++]=r;for(e=0;e<=15;e++)l[e]=0;for(t=0;t<=143;)d[2*t+1]=8,t++,l[8]++;for(;t<=255;)d[2*t+1]=9,t++,l[9]++;for(;t<=279;)d[2*t+1]=7,t++,l[7]++;for(;t<=287;)d[2*t+1]=8,t++,l[8]++;for(S(d,287,l),t=0;t<30;t++)c[2*t+1]=5,c[2*t]=E(t,5);g=new b(d,a,257,286,15),p=new b(c,o,0,30,15),m=new b(new Array(0),s,0,19,7)}(),M=!0),t.l_desc=new _(t.dyn_ltree,g),t.d_desc=new _(t.dyn_dtree,p),t.bl_desc=new _(t.bl_tree,m),t.bi_buf=0,t.bi_valid=0,C(t)},e._tr_stored_block=N,e._tr_flush_block=function(t,e,n,r){var i,a,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),D(t,t.l_desc),D(t,t.d_desc),o=function(t){var e;for(z(t,t.dyn_ltree,t.l_desc.max_code),z(t,t.dyn_dtree,t.d_desc.max_code),D(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*l[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==e?N(t,e,n,r):4===t.strategy||a===i?(k(t,2+(r?1:0),3),B(t,d,c)):(k(t,4+(r?1:0),3),function(t,e,n,r){var i;for(k(t,e-257,5),k(t,n-1,5),k(t,r-4,4),i=0;i<r;i++)k(t,t.bl_tree[2*l[i]+1],3);R(t,t.dyn_ltree,e-1),R(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),B(t,t.dyn_ltree,t.dyn_dtree)),C(t),r&&I(t)},e._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(h[n]+256+1)]++,t.dyn_dtree[2*w(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){k(t,2,3),x(t,256,d),function(t){16===t.bi_valid?(y(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,n){"use strict";var r=n(18),i=n(0),a=n(4),o=n(6),s=n(1),l=n(5),d=n(21),c=Object.prototype.toString;function u(t){if(!(this instanceof u))return new u(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,e.windowBits);if(n!==o.Z_OK)throw new Error(s[n]);if(this.header=new d,r.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=a.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=r.inflateSetDictionary(this.strm,e.dictionary))!==o.Z_OK))throw new Error(s[n])}function h(t,e){var n=new u(e);if(n.push(t,!0),n.err)throw n.msg||s[n.err];return n.result}u.prototype.push=function(t,e){var n,s,l,d,u,h=this.strm,f=this.options.chunkSize,g=this.options.dictionary,p=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof t?h.input=a.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?h.input=new Uint8Array(t):h.input=t,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new i.Buf8(f),h.next_out=0,h.avail_out=f),(n=r.inflate(h,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&g&&(n=r.inflateSetDictionary(this.strm,g)),n===o.Z_BUF_ERROR&&!0===p&&(n=o.Z_OK,p=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),this.ended=!0,!1;h.next_out&&(0!==h.avail_out&&n!==o.Z_STREAM_END&&(0!==h.avail_in||s!==o.Z_FINISH&&s!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(l=a.utf8border(h.output,h.next_out),d=h.next_out-l,u=a.buf2string(h.output,l),h.next_out=d,h.avail_out=f-d,d&&i.arraySet(h.output,h.output,l,d,0),this.onData(u)):this.onData(i.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(p=!0)}while((h.avail_in>0||0===h.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(s=o.Z_FINISH),s===o.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):s!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),h.avail_out=0,!0)},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){t===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=u,e.inflate=h,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,h(t,e)},e.ungzip=h},function(t,e,n){"use strict";var r=n(0),i=n(2),a=n(3),o=n(19),s=n(20);function l(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function d(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function c(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new r.Buf32(852),e.distcode=e.distdyn=new r.Buf32(592),e.sane=1,e.back=-1,0):-2}function u(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,c(t)):-2}function h(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,u(t))):-2}function f(t,e){var n,r;return t?(r=new d,t.state=r,r.window=null,0!==(n=h(t,e))&&(t.state=null),n):-2}var g,p,m=!0;function v(t){if(m){var e;for(g=new r.Buf32(512),p=new r.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(1,t.lens,0,288,g,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(2,t.lens,0,32,p,0,t.work,{bits:5}),m=!1}t.lencode=g,t.lenbits=9,t.distcode=p,t.distbits=5}function b(t,e,n,i){var a,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((a=o.wsize-o.wnext)>i&&(a=i),r.arraySet(o.window,e,n-i,a,o.wnext),(i-=a)?(r.arraySet(o.window,e,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}e.inflateReset=u,e.inflateReset2=h,e.inflateResetKeep=c,e.inflateInit=function(t){return f(t,15)},e.inflateInit2=f,e.inflate=function(t,e){var n,d,c,u,h,f,g,p,m,_,w,y,k,x,E,S,C,I,T,A,B,D,z,R,M=0,N=new r.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(n=t.state).mode&&(n.mode=13),h=t.next_out,c=t.output,g=t.avail_out,u=t.next_in,d=t.input,f=t.avail_in,p=n.hold,m=n.bits,_=f,w=g,D=0;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;m<16;){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}if(2&n.wrap&&35615===p){n.check=0,N[0]=255&p,N[1]=p>>>8&255,n.check=a(n.check,N,2,0),p=0,m=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&p)<<8)+(p>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&p)){t.msg="unknown compression method",n.mode=30;break}if(m-=4,B=8+(15&(p>>>=4)),0===n.wbits)n.wbits=B;else if(B>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<B,t.adler=n.check=1,n.mode=512&p?10:12,p=0,m=0;break;case 2:for(;m<16;){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}if(n.flags=p,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=p>>8&1),512&n.flags&&(N[0]=255&p,N[1]=p>>>8&255,n.check=a(n.check,N,2,0)),p=0,m=0,n.mode=3;case 3:for(;m<32;){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}n.head&&(n.head.time=p),512&n.flags&&(N[0]=255&p,N[1]=p>>>8&255,N[2]=p>>>16&255,N[3]=p>>>24&255,n.check=a(n.check,N,4,0)),p=0,m=0,n.mode=4;case 4:for(;m<16;){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}n.head&&(n.head.xflags=255&p,n.head.os=p>>8),512&n.flags&&(N[0]=255&p,N[1]=p>>>8&255,n.check=a(n.check,N,2,0)),p=0,m=0,n.mode=5;case 5:if(1024&n.flags){for(;m<16;){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}n.length=p,n.head&&(n.head.extra_len=p),512&n.flags&&(N[0]=255&p,N[1]=p>>>8&255,n.check=a(n.check,N,2,0)),p=0,m=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((y=n.length)>f&&(y=f),y&&(n.head&&(B=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,d,u,y,B)),512&n.flags&&(n.check=a(n.check,d,y,u)),f-=y,u+=y,n.length-=y),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===f)break t;y=0;do{B=d[u+y++],n.head&&B&&n.length<65536&&(n.head.name+=String.fromCharCode(B))}while(B&&y<f);if(512&n.flags&&(n.check=a(n.check,d,y,u)),f-=y,u+=y,B)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===f)break t;y=0;do{B=d[u+y++],n.head&&B&&n.length<65536&&(n.head.comment+=String.fromCharCode(B))}while(B&&y<f);if(512&n.flags&&(n.check=a(n.check,d,y,u)),f-=y,u+=y,B)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;m<16;){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}if(p!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}p=0,m=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;m<32;){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}t.adler=n.check=l(p),p=0,m=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=h,t.avail_out=g,t.next_in=u,t.avail_in=f,n.hold=p,n.bits=m,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){p>>>=7&m,m-=7&m,n.mode=27;break}for(;m<3;){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}switch(n.last=1&p,m-=1,3&(p>>>=1)){case 0:n.mode=14;break;case 1:if(v(n),n.mode=20,6===e){p>>>=2,m-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}p>>>=2,m-=2;break;case 14:for(p>>>=7&m,m-=7&m;m<32;){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}if((65535&p)!=(p>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&p,p=0,m=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(y=n.length){if(y>f&&(y=f),y>g&&(y=g),0===y)break t;r.arraySet(c,d,u,y,h),f-=y,u+=y,g-=y,h+=y,n.length-=y;break}n.mode=12;break;case 17:for(;m<14;){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}if(n.nlen=257+(31&p),p>>>=5,m-=5,n.ndist=1+(31&p),p>>>=5,m-=5,n.ncode=4+(15&p),p>>>=4,m-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;m<3;){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}n.lens[F[n.have++]]=7&p,p>>>=3,m-=3}for(;n.have<19;)n.lens[F[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,z={bits:n.lenbits},D=s(0,n.lens,0,19,n.lencode,0,n.work,z),n.lenbits=z.bits,D){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;S=(M=n.lencode[p&(1<<n.lenbits)-1])>>>16&255,C=65535&M,!((E=M>>>24)<=m);){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}if(C<16)p>>>=E,m-=E,n.lens[n.have++]=C;else{if(16===C){for(R=E+2;m<R;){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}if(p>>>=E,m-=E,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}B=n.lens[n.have-1],y=3+(3&p),p>>>=2,m-=2}else if(17===C){for(R=E+3;m<R;){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}m-=E,B=0,y=3+(7&(p>>>=E)),p>>>=3,m-=3}else{for(R=E+7;m<R;){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}m-=E,B=0,y=11+(127&(p>>>=E)),p>>>=7,m-=7}if(n.have+y>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;y--;)n.lens[n.have++]=B}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,z={bits:n.lenbits},D=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,z),n.lenbits=z.bits,D){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,z={bits:n.distbits},D=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,z),n.distbits=z.bits,D){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(f>=6&&g>=258){t.next_out=h,t.avail_out=g,t.next_in=u,t.avail_in=f,n.hold=p,n.bits=m,o(t,w),h=t.next_out,c=t.output,g=t.avail_out,u=t.next_in,d=t.input,f=t.avail_in,p=n.hold,m=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;S=(M=n.lencode[p&(1<<n.lenbits)-1])>>>16&255,C=65535&M,!((E=M>>>24)<=m);){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}if(S&&0==(240&S)){for(I=E,T=S,A=C;S=(M=n.lencode[A+((p&(1<<I+T)-1)>>I)])>>>16&255,C=65535&M,!(I+(E=M>>>24)<=m);){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}p>>>=I,m-=I,n.back+=I}if(p>>>=E,m-=E,n.back+=E,n.length=C,0===S){n.mode=26;break}if(32&S){n.back=-1,n.mode=12;break}if(64&S){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&S,n.mode=22;case 22:if(n.extra){for(R=n.extra;m<R;){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}n.length+=p&(1<<n.extra)-1,p>>>=n.extra,m-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;S=(M=n.distcode[p&(1<<n.distbits)-1])>>>16&255,C=65535&M,!((E=M>>>24)<=m);){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}if(0==(240&S)){for(I=E,T=S,A=C;S=(M=n.distcode[A+((p&(1<<I+T)-1)>>I)])>>>16&255,C=65535&M,!(I+(E=M>>>24)<=m);){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}p>>>=I,m-=I,n.back+=I}if(p>>>=E,m-=E,n.back+=E,64&S){t.msg="invalid distance code",n.mode=30;break}n.offset=C,n.extra=15&S,n.mode=24;case 24:if(n.extra){for(R=n.extra;m<R;){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}n.offset+=p&(1<<n.extra)-1,p>>>=n.extra,m-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===g)break t;if(y=w-g,n.offset>y){if((y=n.offset-y)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}y>n.wnext?(y-=n.wnext,k=n.wsize-y):k=n.wnext-y,y>n.length&&(y=n.length),x=n.window}else x=c,k=h-n.offset,y=n.length;y>g&&(y=g),g-=y,n.length-=y;do{c[h++]=x[k++]}while(--y);0===n.length&&(n.mode=21);break;case 26:if(0===g)break t;c[h++]=n.length,g--,n.mode=21;break;case 27:if(n.wrap){for(;m<32;){if(0===f)break t;f--,p|=d[u++]<<m,m+=8}if(w-=g,t.total_out+=w,n.total+=w,w&&(t.adler=n.check=n.flags?a(n.check,c,w,h-w):i(n.check,c,w,h-w)),w=g,(n.flags?p:l(p))!==n.check){t.msg="incorrect data check",n.mode=30;break}p=0,m=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;m<32;){if(0===f)break t;f--,p+=d[u++]<<m,m+=8}if(p!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}p=0,m=0}n.mode=29;case 29:D=1;break t;case 30:D=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=h,t.avail_out=g,t.next_in=u,t.avail_in=f,n.hold=p,n.bits=m,(n.wsize||w!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&b(t,t.output,t.next_out,w-t.avail_out)?(n.mode=31,-4):(_-=t.avail_in,w-=t.avail_out,t.total_in+=_,t.total_out+=w,n.total+=w,n.wrap&&w&&(t.adler=n.check=n.flags?a(n.check,c,w,t.next_out-w):i(n.check,c,w,t.next_out-w)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===_&&0===w||4===e)&&0===D&&(D=-5),D)},e.inflateEnd=function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},e.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?-2:(n.head=e,e.done=!1,0):-2},e.inflateSetDictionary=function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?-2:11===n.mode&&i(1,e,r,0)!==n.check?-3:b(t,e,r,r)?(n.mode=31,-4):(n.havedict=1,0):-2},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,n){"use strict";t.exports=function(t,e){var n,r,i,a,o,s,l,d,c,u,h,f,g,p,m,v,b,_,w,y,k,x,E,S,C;n=t.state,r=t.next_in,S=t.input,i=r+(t.avail_in-5),a=t.next_out,C=t.output,o=a-(e-t.avail_out),s=a+(t.avail_out-257),l=n.dmax,d=n.wsize,c=n.whave,u=n.wnext,h=n.window,f=n.hold,g=n.bits,p=n.lencode,m=n.distcode,v=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;t:do{g<15&&(f+=S[r++]<<g,g+=8,f+=S[r++]<<g,g+=8),_=p[f&v];e:for(;;){if(f>>>=w=_>>>24,g-=w,0===(w=_>>>16&255))C[a++]=65535&_;else{if(!(16&w)){if(0==(64&w)){_=p[(65535&_)+(f&(1<<w)-1)];continue e}if(32&w){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}y=65535&_,(w&=15)&&(g<w&&(f+=S[r++]<<g,g+=8),y+=f&(1<<w)-1,f>>>=w,g-=w),g<15&&(f+=S[r++]<<g,g+=8,f+=S[r++]<<g,g+=8),_=m[f&b];n:for(;;){if(f>>>=w=_>>>24,g-=w,!(16&(w=_>>>16&255))){if(0==(64&w)){_=m[(65535&_)+(f&(1<<w)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(k=65535&_,g<(w&=15)&&(f+=S[r++]<<g,(g+=8)<w&&(f+=S[r++]<<g,g+=8)),(k+=f&(1<<w)-1)>l){t.msg="invalid distance too far back",n.mode=30;break t}if(f>>>=w,g-=w,k>(w=a-o)){if((w=k-w)>c&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(x=0,E=h,0===u){if(x+=d-w,w<y){y-=w;do{C[a++]=h[x++]}while(--w);x=a-k,E=C}}else if(u<w){if(x+=d+u-w,(w-=u)<y){y-=w;do{C[a++]=h[x++]}while(--w);if(x=0,u<y){y-=w=u;do{C[a++]=h[x++]}while(--w);x=a-k,E=C}}}else if(x+=u-w,w<y){y-=w;do{C[a++]=h[x++]}while(--w);x=a-k,E=C}for(;y>2;)C[a++]=E[x++],C[a++]=E[x++],C[a++]=E[x++],y-=3;y&&(C[a++]=E[x++],y>1&&(C[a++]=E[x++]))}else{x=a-k;do{C[a++]=C[x++],C[a++]=C[x++],C[a++]=C[x++],y-=3}while(y>2);y&&(C[a++]=C[x++],y>1&&(C[a++]=C[x++]))}break}}break}}while(r<i&&a<s);r-=y=g>>3,f&=(1<<(g-=y<<3))-1,t.next_in=r,t.next_out=a,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=a<s?s-a+257:257-(a-s),n.hold=f,n.bits=g}},function(t,e,n){"use strict";var r=n(0),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,l,d,c,u,h){var f,g,p,m,v,b,_,w,y,k=h.bits,x=0,E=0,S=0,C=0,I=0,T=0,A=0,B=0,D=0,z=0,R=null,M=0,N=new r.Buf16(16),F=new r.Buf16(16),L=null,P=0;for(x=0;x<=15;x++)N[x]=0;for(E=0;E<l;E++)N[e[n+E]]++;for(I=k,C=15;C>=1&&0===N[C];C--);if(I>C&&(I=C),0===C)return d[c++]=20971520,d[c++]=20971520,h.bits=1,0;for(S=1;S<C&&0===N[S];S++);for(I<S&&(I=S),B=1,x=1;x<=15;x++)if(B<<=1,(B-=N[x])<0)return-1;if(B>0&&(0===t||1!==C))return-1;for(F[1]=0,x=1;x<15;x++)F[x+1]=F[x]+N[x];for(E=0;E<l;E++)0!==e[n+E]&&(u[F[e[n+E]]++]=E);if(0===t?(R=L=u,b=19):1===t?(R=i,M-=257,L=a,P-=257,b=256):(R=o,L=s,b=-1),z=0,E=0,x=S,v=c,T=I,A=0,p=-1,m=(D=1<<I)-1,1===t&&D>852||2===t&&D>592)return 1;for(;;){_=x-A,u[E]<b?(w=0,y=u[E]):u[E]>b?(w=L[P+u[E]],y=R[M+u[E]]):(w=96,y=0),f=1<<x-A,S=g=1<<T;do{d[v+(z>>A)+(g-=f)]=_<<24|w<<16|y|0}while(0!==g);for(f=1<<x-1;z&f;)f>>=1;if(0!==f?(z&=f-1,z+=f):z=0,E++,0==--N[x]){if(x===C)break;x=e[n+u[E]]}if(x>I&&(z&m)!==p){for(0===A&&(A=I),v+=S,B=1<<(T=x-A);T+A<C&&!((B-=N[T+A])<=0);)T++,B<<=1;if(D+=1<<T,1===t&&D>852||2===t&&D>592)return 1;d[p=z&m]=I<<24|T<<16|v-c|0}}return 0!==z&&(d[v+z]=x-A<<24|64<<16|0),h.bits=I,0}},function(t,e,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(t,e,n){var r,i,a;i=[],void 0===(a="function"==typeof(r=function(){return function t(e,n,r){var i,a,o=window,s="application/octet-stream",l=r||s,d=e,c=!n&&!r&&d,u=document.createElement("a"),h=function(t){return String(t)},f=o.Blob||o.MozBlob||o.WebKitBlob||h,g=n||"download";if(f=f.call?f.bind(o):Blob,"true"===String(this)&&(l=(d=[d,l])[0],d=d[1]),c&&c.length<2048&&(g=c.split("/").pop().split("?")[0],u.href=c,-1!==u.href.indexOf(c))){var p=new XMLHttpRequest;return p.open("GET",c,!0),p.responseType="blob",p.onload=function(e){t(e.target.response,g,s)},setTimeout((function(){p.send()}),0),p}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(d)){if(!(d.length>2096103.424&&f!==h))return navigator.msSaveBlob?navigator.msSaveBlob(_(d),g):w(d);l=(d=_(d)).type||s}else if(/([\x80-\xff])/.test(d)){for(var m=0,v=new Uint8Array(d.length),b=v.length;m<b;++m)v[m]=d.charCodeAt(m);d=new f([v],{type:l})}function _(t){for(var e=t.split(/[:;,]/),n=e[1],r=("base64"==e[2]?atob:decodeURIComponent)(e.pop()),i=r.length,a=0,o=new Uint8Array(i);a<i;++a)o[a]=r.charCodeAt(a);return new f([o],{type:n})}function w(t,e){if("download"in u)return u.href=t,u.setAttribute("download",g),u.className="download-js-link",u.innerHTML="downloading...",u.style.display="none",document.body.appendChild(u),setTimeout((function(){u.click(),document.body.removeChild(u),!0===e&&setTimeout((function(){o.URL.revokeObjectURL(u.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,s)),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=document.createElement("iframe");document.body.appendChild(n),!e&&/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,s)),n.src=t,setTimeout((function(){document.body.removeChild(n)}),333)}if(i=d instanceof f?d:new f([d],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(i,g);if(o.URL)w(o.URL.createObjectURL(i),!0);else{if("string"==typeof i||i.constructor===h)try{return w("data:"+l+";base64,"+o.btoa(i))}catch(t){return w("data:"+l+","+encodeURIComponent(i))}(a=new FileReader).onload=function(t){w(this.result)},a.readAsDataURL(i)}return!0}})?r.apply(e,i):r)||(t.exports=a)},function(t,e,n){"use strict";n.r(e);n(7);let r=document.getElementById("body");var i=function(t,e){r.insertAdjacentHTML("afterbegin",`<header id = "header-wrap">\n    <h1><a href="#">picturess</a></h1>\n        </header>\n    <main>\n    <section id='left-sticky-section'>\n  <div id='wrapper-toolbar'>\n  <div id='toolbar'>\n  <div id='mainInstruments'>\n    <div><img title = "Pen tool" class = 'instruments'  id='pen' src='../dist/img/pen.png'></div>\n    <div><img title = "Eraser tool" class = 'instruments' id='eraser' src='../dist/img/eraser.png'></div>\n    <div><img title = "Stroke tool" class = 'instruments' id='line'src='../dist/img/line.png'></div>\n    <div><img title = "Vertical Mirror pen" class = 'instruments' id='mirror-pen' src='../dist/img/mirror-pen.png'></div>\n    <div><img title = "Paint All pixels of the same color" class = 'instruments' id='canvasFill' src='../dist/img/canvasFill.png'></div>\n    <div><img title = "Color picker" class = 'instruments' id='pipette' src='../dist/img/pipette.png'></div>\n  </div>\n  <div id='figures'>\n    <div><img title = "Rectangle tool" class = 'instruments' id='rectangle' src='../dist/img/rectangle.png'></div>\n    <div><img title = "Triangle tool" class = 'instruments'  id='triangle' src='../dist/img/triangle.png'></div>\n    <div><img title = "Circle tool" class = 'instruments' id='circle' src='../dist/img/circle.png'></div>\n    <div><img title = "Ellipse tool" class = 'instruments' id='ellipse' src='../dist/img/ellipse.png'></div>\n    <div><img class = 'instruments' id='rotate' src='../dist/img/arrow.png'></div>\n    <div><img class = 'instruments' id='flip' src='../dist/img/flip.png'></div>\n  </div>\n</div>\n<div id = "slider-container">\n<input type="range" min="1" max="25" value = ${t.getProp("selectedThickness")} id="thickness-slider">\n</div>\n<div id="color-panel">\n<input type="color" title = "Left mouse color button" id="color">\n<input type="color" title = "Right mouse color button" id="right-color">\n</div>\n</div>\n\n<div id="preview-list-wrapper">\n<ul id = "list-frames"></ul>\n<button id="addFrameButton">Add new frame</button>\n</div>\n</section>\n<section id='drawing-canvas-container'>\n<div id="parent-canvas">\n<canvas id="drawing-canvas"></canvas>\n<canvas id="cabbage-skin-canvas"></canvas>\n<canvas id="dot-overlay-canvas"></canvas>\n</div>\n</section>\n<section id='right-sticky-section'>\n<div id="commonButtonContainer">\n<div id=fps-picture>\n<img src = ${e.getFrames()[1]} id="animatedFrame">\n</div>\n<div id="display-fps-container">\n<span id="display-fps">${e.getCurrentFps()} FPS</span>\n<input type="range" min="1" max="60" value = ${e.getCurrentFps()} id="fps-slider">\n</div>\n\n\n<input type="file"name="add-img" id="add-img" multiple>  \n<label for="add-img">Choose a file</label>\n<button id="butt-delete-img">Delete picture</button>\n<button id="butt-save-img">Save picture .png</button>\n\x3c!--  <button id="butt-save-gif">Save animation .gif</button> --\x3e\n</div>\n<div id="container-resize-settings">\n\x3c!-- <span>RESIZE</span>\n<div id="resize-inputs">\n<input type="text" placeholder="Height" id="changeSizeHeight"> <span></span> <input type="text"placeholder="Width" id="changeSizeWidth">\n</div>--\x3e\n<div id="background">Background:</div>\n<div id="choiceBackground">\n<img lass="typeBackground" src="../dist/img/grid.png" id="grid">\n<img lass="typeBackground" src="../dist/img/grid2.png" id="grid2">\n<img lass="typeBackground" src="../dist/img/grid3.png" id="grid3">\n<img lass="typeBackground" src="../dist/img/grid4.png" id="grid4">\n</div>\n</div>\n\n\n</section></main>`)};var a=function(t){const e=document.getElementById("toolbar"),n=document.querySelectorAll(".instruments");e.addEventListener("click",t=>{t.target.classList.contains("instruments")&&(n.forEach(t=>{t.classList.remove("selectedButton")}),t.target.classList.add("selectedButton"))}),e.addEventListener("click",(function(e){e.target.classList.contains("instruments")&&t.setProp("selectedTool",e.target.id)}),!1)};const o={selectedTool:"pen",selectedThickness:10,selectedLeftColor:"#000000",selectedRightColor:"#000000"};function s(){return{getProp:function(t){return o[t]},setProp:function(t,e){o[t]=e}}}const l={picture:"",selectedFrameId:"",selectedColorGrid:"../dist/img/grid.png"};var d=function(){return{getCurrentSrcCanvas:function(){return l.picture},setCurrentSrcCanvas:function(t){l.picture=t},getIdCurrentFrame:function(){return l.selectedFrameId},setIdCurrentFrame:function(t){l.selectedFrameId=t},getCurrentBackgroundCanvas:function(){return l.selectedColorGrid},setCurrentBackgroundCanvas:function(t){l.selectedColorGrid=t}}};d();function c(t,e,n,r,i,a,o,s,l){n.beginPath(),n.moveTo(r,i),n.lineTo(a,o),n.clearRect(0,0,e.width,e.height),n.lineWidth=s,n.strokeStyle=l,n.stroke()}function u(t,e,n,r,i,a,o,s,l,d,u){c(0,t,n,d,u,a,o,s,l);let h=s/2;n.beginPath(),n.arc(a,o,h,0,2*Math.PI),n.fillStyle=l,n.fill()}const h={pen:u,eraser:function(t,e,n,r,i,a,o,s,l){t.clearRect(a-s/2,o-s/2,s,s)},line:c,imposition:function(t,e){const n=t.getContext("2d"),r=n.getImageData(0,0,t.width,t.height).data,i=e.getContext("2d"),a=i.getImageData(0,0,e.width,e.height).data,o=a.slice(0,a.length),s=r.slice(0,r.length);for(let t=0;t<o.length;t+=4)0==o[t]&&0==o[t+1]&&0==o[t+2]&&0==o[t+3]||(s[t]=o[t],s[t+1]=o[t+1],s[t+2]=o[t+2],s[t+3]=o[t+3]);let l=new ImageData(s,e.width,e.height);n.putImageData(l,0,0),i.clearRect(0,0,e.width,e.height)},rectangle:function(t,e,n,r,i,a,o,s,l){const d=a-r,c=o-i;n.beginPath(),n.rect(r,i,d,c),n.clearRect(0,0,e.width,e.height),n.lineWidth=s,n.strokeStyle=l,n.stroke()},triangle:function(t,e,n,r,i,a,o,s,l){n.beginPath(),n.moveTo(r,i),n.lineTo(a,o),n.lineTo(a-2*(a-r),o),n.closePath(),n.clearRect(0,0,e.width,e.height),n.lineWidth=s,n.strokeStyle=l,n.stroke()},circle:function(t,e,n,r,i,a,o,s,l){let d=Math.pow(Math.pow(a-r,2)+Math.pow(o-i,2),.5);n.beginPath(),n.arc(r,i,d,0,2*Math.PI),n.clearRect(0,0,e.width,e.height),n.lineWidth=s,n.strokeStyle=l,n.stroke()},ellipse:function(t,e,n,r,i,a,o,s,l){n.beginPath(),n.ellipse(r,i,a-r,o-i,Math.PI/4,0,2*Math.PI),n.clearRect(0,0,e.width,e.height),n.lineWidth=s,n.strokeStyle=l,n.stroke()},followSquare:function(t,e,n,r,i){e.beginPath(),e.rect(n-i/2,r-i/2,i,i),e.closePath(),e.clearRect(0,0,t.width,t.height),e.fillStyle="rgba(107, 105, 105, 0.5)",e.fill(),e.stroke()},"mirror-pen":function(t,e,n,r,i,a,o,s,l,d,c){const h=document.getElementById("drawing-canvas");u(t,0,n,0,0,a-s/2,o-s/2,s,l,d-s/2,c-s/2),u(t,0,n,0,0,h.width-a-s/2,o-s/2,s,l,h.width-d-s/2,c-s/2)},pipette:function(t,e,n,r,i,a,o,l,d){const c=document.getElementById("drawing-canvas"),u=document.getElementById("color"),h=t.getImageData(0,0,c.width,c.height),f=h.data,g=(i-1)*(4*h.width)+4*(r-1);let p=f[g].toString(16),m=f[g+1].toString(16),v=f[g+2].toString(16);1==p.length&&(p="0"+p),1==m.length&&(m="0"+m),1==v.length&&(v="0"+v);const b="#"+p+m+v;s().setProp("selectedLeftColor",b),u.value=b},canvasFill:function(t,e,n,r,i,a,o,s,l){const d=document.getElementById("drawing-canvas"),c=t.getImageData(0,0,d.width,d.height),u=c.data,h=parseInt(l.slice(1,3),16),f=parseInt(l.slice(3,5),16),g=parseInt(l.slice(5,7),16);for(let t=0;t<u.length;t+=4)0===u[t]&&(u[t+0]=h,u[t+1]=f,u[t+2]=g,u[t+3]=255);console.log(u),t.putImageData(c,0,0)},lighter:function(t,e,n,r,i,a,o,s,l){}};function f(t){return h[t]}function g(t,e,n,r){e.addEventListener("change",()=>{const i=e.value;t.setProp(n,i),localStorage.setItem(r,i)})}const p={pictureArr:[],currentFps:1};function m(t){p.pictureArr.push(t)}var v={getFrames:function(){return p.pictureArr},pushFrame:m,deleteFrame:function(t){p.pictureArr.splice(t,1)},duplicateFrame:function(t){const e=p.pictureArr[t];p.pictureArr.splice(t,0,e)},replaceFrame:function(t,e){const n=p.pictureArr[t];p.pictureArr.splice(t,1),p.pictureArr.splice(e,0,n)},getCurrentFps:function(){return p.currentFps},setCurrentFps:function(t){p.currentFps=t},updateFrame:function(t,e){p.pictureArr[t]=e},pushFrames:function(t){t.map(t=>m(t))}};const b=d();var _=function(t){const e=document.getElementById("animatedFrame"),n=document.getElementById("drawing-canvas"),r=document.querySelectorAll(".wrapper-frame"),i=`url(${t})`;b.setCurrentBackgroundCanvas(t),n.style.backgroundImage=i,e.style.backgroundImage=i,r.forEach(t=>{t.style.backgroundImage=i})};const w=d();
/**!
 * Sortable 1.10.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x(){return(x=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){k(t,e,n[e])}))}return t}function S(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function C(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var I=C(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),T=C(/Edge/i),A=C(/firefox/i),B=C(/safari/i)&&!C(/chrome/i)&&!C(/android/i),D=C(/iP(ad|od|hone)/i),z=C(/chrome/i)&&C(/android/i),R={capture:!1,passive:!1};function M(t,e,n){t.addEventListener(e,n,!I&&R)}function N(t,e,n){t.removeEventListener(e,n,!I&&R)}function F(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function L(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function P(t,e,n,r){if(t){n=n||document;do{if(null!=e&&(">"===e[0]?t.parentNode===n&&F(t,e):F(t,e))||r&&t===n)return t;if(t===n)break}while(t=L(t))}return null}var O,U=/\s+/g;function Z(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(U," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(U," ")}}function j(t,e,n){var r=t&&t.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in r||-1!==e.indexOf("webkit")||(e="-webkit-"+e),r[e]=n+("string"==typeof n?"":"px")}}function H(t,e){var n="";if("string"==typeof t)n=t;else do{var r=j(t,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function X(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,a=r.length;if(n)for(;i<a;i++)n(r[i],i);return r}return[]}function Y(){var t=document.scrollingElement;return t||document.documentElement}function q(t,e,n,r,i){if(t.getBoundingClientRect||t===window){var a,o,s,l,d,c,u;if(t!==window&&t!==Y()?(o=(a=t.getBoundingClientRect()).top,s=a.left,l=a.bottom,d=a.right,c=a.height,u=a.width):(o=0,s=0,l=window.innerHeight,d=window.innerWidth,c=window.innerHeight,u=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!I))do{if(i&&i.getBoundingClientRect&&("none"!==j(i,"transform")||n&&"static"!==j(i,"position"))){var h=i.getBoundingClientRect();o-=h.top+parseInt(j(i,"border-top-width")),s-=h.left+parseInt(j(i,"border-left-width")),l=o+a.height,d=s+a.width;break}}while(i=i.parentNode);if(r&&t!==window){var f=H(i||t),g=f&&f.a,p=f&&f.d;f&&(l=(o/=p)+(c/=p),d=(s/=g)+(u/=g))}return{top:o,left:s,bottom:l,right:d,width:u,height:c}}}function W(t,e,n){for(var r=J(t,!0),i=q(t)[e];r;){var a=q(r)[n];if(!("top"===n||"left"===n?i>=a:i<=a))return r;if(r===Y())break;r=J(r,!1)}return!1}function G(t,e,n){for(var r=0,i=0,a=t.children;i<a.length;){if("none"!==a[i].style.display&&a[i]!==ee.ghost&&a[i]!==ee.dragged&&P(a[i],n.draggable,t,!1)){if(r===e)return a[i];r++}i++}return null}function $(t,e){for(var n=t.lastElementChild;n&&(n===ee.ghost||"none"===j(n,"display")||e&&!F(n,e));)n=n.previousElementSibling;return n||null}function K(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===ee.clone||e&&!F(t,e)||n++;return n}function V(t){var e=0,n=0,r=Y();if(t)do{var i=H(t),a=i.a,o=i.d;e+=t.scrollLeft*a,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function J(t,e){if(!t||!t.getBoundingClientRect)return Y();var n=t,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=j(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return Y();if(r||e)return n;r=!0}}}while(n=n.parentNode);return Y()}function Q(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function tt(t,e){return function(){if(!O){var n=arguments,r=this;1===n.length?t.call(r,n[0]):t.apply(r,n),O=setTimeout((function(){O=void 0}),e)}}}function et(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function nt(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var rt="Sortable"+(new Date).getTime();function it(){var t,e=[];return{captureAnimationState:function(){(e=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(t){if("none"!==j(t,"display")&&t!==ee.ghost){e.push({target:t,rect:q(t)});var n=E({},e[e.length-1].rect);if(t.thisAnimationDuration){var r=H(t,!0);r&&(n.top-=r.f,n.left-=r.e)}t.fromRect=n}}))},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(function(t,e){for(var n in t)if(t.hasOwnProperty(n))for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n);return-1}(e,{target:t}),1)},animateAll:function(n){var r=this;if(!this.options.animation)return clearTimeout(t),void("function"==typeof n&&n());var i=!1,a=0;e.forEach((function(t){var e=0,n=t.target,o=n.fromRect,s=q(n),l=n.prevFromRect,d=n.prevToRect,c=t.rect,u=H(n,!0);u&&(s.top-=u.f,s.left-=u.e),n.toRect=s,n.thisAnimationDuration&&Q(l,s)&&!Q(o,s)&&(c.top-s.top)/(c.left-s.left)==(o.top-s.top)/(o.left-s.left)&&(e=function(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}(c,l,d,r.options)),Q(s,o)||(n.prevFromRect=o,n.prevToRect=s,e||(e=r.options.animation),r.animate(n,c,s,e)),e&&(i=!0,a=Math.max(a,e),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),e),n.thisAnimationDuration=e)})),clearTimeout(t),i?t=setTimeout((function(){"function"==typeof n&&n()}),a):"function"==typeof n&&n(),e=[]},animate:function(t,e,n,r){if(r){j(t,"transition",""),j(t,"transform","");var i=H(this.el),a=i&&i.a,o=i&&i.d,s=(e.left-n.left)/(a||1),l=(e.top-n.top)/(o||1);t.animatingX=!!s,t.animatingY=!!l,j(t,"transform","translate3d("+s+"px,"+l+"px,0)"),function(t){t.offsetWidth}(t),j(t,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),j(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){j(t,"transition",""),j(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),r)}}}}var at=[],ot={initializeByDefault:!0},st={mount:function(t){for(var e in ot)ot.hasOwnProperty(e)&&!(e in t)&&(t[e]=ot[e]);at.push(t)},pluginEvent:function(t,e,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var i=t+"Global";at.forEach((function(r){e[r.pluginName]&&(e[r.pluginName][i]&&e[r.pluginName][i](E({sortable:e},n)),e.options[r.pluginName]&&e[r.pluginName][t]&&e[r.pluginName][t](E({sortable:e},n)))}))},initializePlugins:function(t,e,n,r){for(var i in at.forEach((function(r){var i=r.pluginName;if(t.options[i]||r.initializeByDefault){var a=new r(t,e,t.options);a.sortable=t,a.options=t.options,t[i]=a,x(n,a.defaults)}})),t.options)if(t.options.hasOwnProperty(i)){var a=this.modifyOption(t,i,t.options[i]);void 0!==a&&(t.options[i]=a)}},getEventProperties:function(t,e){var n={};return at.forEach((function(r){"function"==typeof r.eventProperties&&x(n,r.eventProperties.call(e[r.pluginName],t))})),n},modifyOption:function(t,e,n){var r;return at.forEach((function(i){t[i.pluginName]&&i.optionListeners&&"function"==typeof i.optionListeners[e]&&(r=i.optionListeners[e].call(t[i.pluginName],n))})),r}};function lt(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,a=t.cloneEl,o=t.toEl,s=t.fromEl,l=t.oldIndex,d=t.newIndex,c=t.oldDraggableIndex,u=t.newDraggableIndex,h=t.originalEvent,f=t.putSortable,g=t.extraEventProperties;if(e=e||n&&n[rt]){var p,m=e.options,v="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||I||T?(p=document.createEvent("Event")).initEvent(r,!0,!0):p=new CustomEvent(r,{bubbles:!0,cancelable:!0}),p.to=o||n,p.from=s||n,p.item=i||n,p.clone=a,p.oldIndex=l,p.newIndex=d,p.oldDraggableIndex=c,p.newDraggableIndex=u,p.originalEvent=h,p.pullMode=f?f.lastPutMode:void 0;var b=E({},g,st.getEventProperties(r,e));for(var _ in b)p[_]=b[_];n&&n.dispatchEvent(p),m[v]&&m[v].call(e,p)}}var dt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,i=S(n,["evt"]);st.pluginEvent.bind(ee)(t,e,E({dragEl:ut,parentEl:ht,ghostEl:ft,rootEl:gt,nextEl:pt,lastDownEl:mt,cloneEl:vt,cloneHidden:bt,dragStarted:Dt,putSortable:Et,activeSortable:ee.active,originalEvent:r,oldIndex:_t,oldDraggableIndex:yt,newIndex:wt,newDraggableIndex:kt,hideGhostForTarget:Vt,unhideGhostForTarget:Jt,cloneNowHidden:function(){bt=!0},cloneNowShown:function(){bt=!1},dispatchSortableEvent:function(t){ct({sortable:e,name:t,originalEvent:r})}},i))};function ct(t){lt(E({putSortable:Et,cloneEl:vt,targetEl:ut,rootEl:gt,oldIndex:_t,oldDraggableIndex:yt,newIndex:wt,newDraggableIndex:kt},t))}var ut,ht,ft,gt,pt,mt,vt,bt,_t,wt,yt,kt,xt,Et,St,Ct,It,Tt,At,Bt,Dt,zt,Rt,Mt,Nt,Ft=!1,Lt=!1,Pt=[],Ot=!1,Ut=!1,Zt=[],jt=!1,Ht=[],Xt="undefined"!=typeof document,Yt=D,qt=T||I?"cssFloat":"float",Wt=Xt&&!z&&!D&&"draggable"in document.createElement("div"),Gt=function(){if(Xt){if(I)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),$t=function(t,e){var n=j(t),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=G(t,0,e),a=G(t,1,e),o=i&&j(i),s=a&&j(a),l=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+q(i).width,d=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+q(a).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&o.float&&"none"!==o.float){var c="left"===o.float?"left":"right";return!a||"both"!==s.clear&&s.clear!==c?"horizontal":"vertical"}return i&&("block"===o.display||"flex"===o.display||"table"===o.display||"grid"===o.display||l>=r&&"none"===n[qt]||a&&"none"===n[qt]&&l+d>r)?"vertical":"horizontal"},Kt=function(t){function e(t,n){return function(r,i,a,o){var s=r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name;if(null==t&&(n||s))return!0;if(null==t||!1===t)return!1;if(n&&"clone"===t)return t;if("function"==typeof t)return e(t(r,i,a,o),n)(r,i,a,o);var l=(n?r:i).options.group.name;return!0===t||"string"==typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var n={},r=t.group;r&&"object"==y(r)||(r={name:r}),n.name=r.name,n.checkPull=e(r.pull,!0),n.checkPut=e(r.put),n.revertClone=r.revertClone,t.group=n},Vt=function(){!Gt&&ft&&j(ft,"display","none")},Jt=function(){!Gt&&ft&&j(ft,"display","")};Xt&&document.addEventListener("click",(function(t){if(Lt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Lt=!1,!1}),!0);var Qt=function(t){if(ut){t=t.touches?t.touches[0]:t;var e=(i=t.clientX,a=t.clientY,Pt.some((function(t){if(!$(t)){var e=q(t),n=t[rt].options.emptyInsertThreshold,r=i>=e.left-n&&i<=e.right+n,s=a>=e.top-n&&a<=e.bottom+n;return n&&r&&s?o=t:void 0}})),o);if(e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[rt]._onDragOver(n)}}var i,a,o},te=function(t){ut&&ut.parentNode[rt]._isOutsideThisEl(t.target)};function ee(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=x({},e),t[rt]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return $t(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ee.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var r in st.initializePlugins(this,t,n),n)!(r in e)&&(e[r]=n[r]);for(var i in Kt(e),this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!e.forceFallback&&Wt,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?M(t,"pointerdown",this._onTapStart):(M(t,"mousedown",this._onTapStart),M(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(M(t,"dragover",this),M(t,"dragenter",this)),Pt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),x(this,it())}function ne(t,e,n,r,i,a,o,s){var l,d,c=t[rt],u=c.options.onMove;return!window.CustomEvent||I||T?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=a||q(e),l.willInsertAfter=s,l.originalEvent=o,t.dispatchEvent(l),u&&(d=u.call(c,l,o)),d}function re(t){t.draggable=!1}function ie(){jt=!1}function ae(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function oe(t){return setTimeout(t,0)}function se(t){return clearTimeout(t)}ee.prototype={constructor:ee,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(zt=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,ut):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,r=this.options,i=r.preventOnFilter,a=t.type,o=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,s=(o||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,d=r.filter;if(function(t){Ht.length=0;var e=t.getElementsByTagName("input"),n=e.length;for(;n--;){var r=e[n];r.checked&&Ht.push(r)}}(n),!ut&&!(/mousedown|pointerdown/.test(a)&&0!==t.button||r.disabled||l.isContentEditable||(s=P(s,r.draggable,n,!1))&&s.animated||mt===s)){if(_t=K(s),yt=K(s,r.draggable),"function"==typeof d){if(d.call(this,t,s,this))return ct({sortable:e,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),dt("filter",e,{evt:t}),void(i&&t.cancelable&&t.preventDefault())}else if(d&&(d=d.split(",").some((function(r){if(r=P(l,r.trim(),n,!1))return ct({sortable:e,rootEl:r,name:"filter",targetEl:s,fromEl:n,toEl:n}),dt("filter",e,{evt:t}),!0}))))return void(i&&t.cancelable&&t.preventDefault());r.handle&&!P(l,r.handle,n,!1)||this._prepareDragStart(t,o,s)}}},_prepareDragStart:function(t,e,n){var r,i=this,a=i.el,o=i.options,s=a.ownerDocument;if(n&&!ut&&n.parentNode===a){var l=q(n);if(gt=a,ht=(ut=n).parentNode,pt=ut.nextSibling,mt=n,xt=o.group,ee.dragged=ut,St={target:ut,clientX:(e||t).clientX,clientY:(e||t).clientY},At=St.clientX-l.left,Bt=St.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,ut.style["will-change"]="all",r=function(){dt("delayEnded",i,{evt:t}),ee.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!A&&i.nativeDraggable&&(ut.draggable=!0),i._triggerDragStart(t,e),ct({sortable:i,name:"choose",originalEvent:t}),Z(ut,o.chosenClass,!0))},o.ignore.split(",").forEach((function(t){X(ut,t.trim(),re)})),M(s,"dragover",Qt),M(s,"mousemove",Qt),M(s,"touchmove",Qt),M(s,"mouseup",i._onDrop),M(s,"touchend",i._onDrop),M(s,"touchcancel",i._onDrop),A&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ut.draggable=!0),dt("delayStart",this,{evt:t}),!o.delay||o.delayOnTouchOnly&&!e||this.nativeDraggable&&(T||I))r();else{if(ee.eventCanceled)return void this._onDrop();M(s,"mouseup",i._disableDelayedDrag),M(s,"touchend",i._disableDelayedDrag),M(s,"touchcancel",i._disableDelayedDrag),M(s,"mousemove",i._delayedDragTouchMoveHandler),M(s,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&M(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(r,o.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ut&&re(ut),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;N(t,"mouseup",this._disableDelayedDrag),N(t,"touchend",this._disableDelayedDrag),N(t,"touchcancel",this._disableDelayedDrag),N(t,"mousemove",this._delayedDragTouchMoveHandler),N(t,"touchmove",this._delayedDragTouchMoveHandler),N(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?M(document,"pointermove",this._onTouchMove):M(document,e?"touchmove":"mousemove",this._onTouchMove):(M(ut,"dragend",this),M(gt,"dragstart",this._onDragStart));try{document.selection?oe((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(Ft=!1,gt&&ut){dt("dragStarted",this,{evt:e}),this.nativeDraggable&&M(document,"dragover",te);var n=this.options;!t&&Z(ut,n.dragClass,!1),Z(ut,n.ghostClass,!0),ee.active=this,t&&this._appendGhost(),ct({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(Ct){this._lastX=Ct.clientX,this._lastY=Ct.clientY,Vt();for(var t=document.elementFromPoint(Ct.clientX,Ct.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Ct.clientX,Ct.clientY))!==e;)e=t;if(ut.parentNode[rt]._isOutsideThisEl(t),e)do{if(e[rt]){if(e[rt]._onDragOver({clientX:Ct.clientX,clientY:Ct.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);Jt()}},_onTouchMove:function(t){if(St){var e=this.options,n=e.fallbackTolerance,r=e.fallbackOffset,i=t.touches?t.touches[0]:t,a=ft&&H(ft,!0),o=ft&&a&&a.a,s=ft&&a&&a.d,l=Yt&&Nt&&V(Nt),d=(i.clientX-St.clientX+r.x)/(o||1)+(l?l[0]-Zt[0]:0)/(o||1),c=(i.clientY-St.clientY+r.y)/(s||1)+(l?l[1]-Zt[1]:0)/(s||1);if(!ee.active&&!Ft){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(ft){a?(a.e+=d-(It||0),a.f+=c-(Tt||0)):a={a:1,b:0,c:0,d:1,e:d,f:c};var u="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");j(ft,"webkitTransform",u),j(ft,"mozTransform",u),j(ft,"msTransform",u),j(ft,"transform",u),It=d,Tt=c,Ct=i}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!ft){var t=this.options.fallbackOnBody?document.body:gt,e=q(ut,!0,Yt,!0,t),n=this.options;if(Yt){for(Nt=t;"static"===j(Nt,"position")&&"none"===j(Nt,"transform")&&Nt!==document;)Nt=Nt.parentNode;Nt!==document.body&&Nt!==document.documentElement?(Nt===document&&(Nt=Y()),e.top+=Nt.scrollTop,e.left+=Nt.scrollLeft):Nt=Y(),Zt=V(Nt)}Z(ft=ut.cloneNode(!0),n.ghostClass,!1),Z(ft,n.fallbackClass,!0),Z(ft,n.dragClass,!0),j(ft,"transition",""),j(ft,"transform",""),j(ft,"box-sizing","border-box"),j(ft,"margin",0),j(ft,"top",e.top),j(ft,"left",e.left),j(ft,"width",e.width),j(ft,"height",e.height),j(ft,"opacity","0.8"),j(ft,"position",Yt?"absolute":"fixed"),j(ft,"zIndex","100000"),j(ft,"pointerEvents","none"),ee.ghost=ft,t.appendChild(ft),j(ft,"transform-origin",At/parseInt(ft.style.width)*100+"% "+Bt/parseInt(ft.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,r=t.dataTransfer,i=n.options;dt("dragStart",this,{evt:t}),ee.eventCanceled?this._onDrop():(dt("setupClone",this),ee.eventCanceled||((vt=nt(ut)).draggable=!1,vt.style["will-change"]="",this._hideClone(),Z(vt,this.options.chosenClass,!1),ee.clone=vt),n.cloneId=oe((function(){dt("clone",n),ee.eventCanceled||(n.options.removeCloneOnHide||gt.insertBefore(vt,ut),n._hideClone(),ct({sortable:n,name:"clone"}))})),!e&&Z(ut,i.dragClass,!0),e?(Lt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(N(document,"mouseup",n._onDrop),N(document,"touchend",n._onDrop),N(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",i.setData&&i.setData.call(n,r,ut)),M(document,"drop",n),j(ut,"transform","translateZ(0)")),Ft=!0,n._dragStartId=oe(n._dragStarted.bind(n,e,t)),M(document,"selectstart",n),Dt=!0,B&&j(document.body,"user-select","none"))},_onDragOver:function(t){var e,n,r,i,a=this.el,o=t.target,s=this.options,l=s.group,d=ee.active,c=xt===l,u=s.sort,h=Et||d,f=this,g=!1;if(!jt){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),o=P(o,s.draggable,a,!0),A("dragOver"),ee.eventCanceled)return g;if(ut.contains(t.target)||o.animated&&o.animatingX&&o.animatingY||f._ignoreWhileAnimating===o)return D(!1);if(Lt=!1,d&&!s.disabled&&(c?u||(r=!gt.contains(ut)):Et===this||(this.lastPutMode=xt.checkPull(this,d,ut,t))&&l.checkPut(this,d,ut,t))){if(i="vertical"===this._getDirection(t,o),e=q(ut),A("dragOverValid"),ee.eventCanceled)return g;if(r)return ht=gt,B(),this._hideClone(),A("revert"),ee.eventCanceled||(pt?gt.insertBefore(ut,pt):gt.appendChild(ut)),D(!0);var p=$(a,s.draggable);if(!p||function(t,e,n){var r=q($(n.el,n.options.draggable));return e?t.clientX>r.right+10||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+10}(t,i,this)&&!p.animated){if(p===ut)return D(!1);if(p&&a===t.target&&(o=p),o&&(n=q(o)),!1!==ne(gt,a,ut,e,o,n,t,!!o))return B(),a.appendChild(ut),ht=a,z(),D(!0)}else if(o.parentNode===a){n=q(o);var m,v,b,_=ut.parentNode!==a,w=!function(t,e,n){var r=n?t.left:t.top,i=n?t.right:t.bottom,a=n?t.width:t.height,o=n?e.left:e.top,s=n?e.right:e.bottom,l=n?e.width:e.height;return r===o||i===s||r+a/2===o+l/2}(ut.animated&&ut.toRect||e,o.animated&&o.toRect||n,i),y=i?"top":"left",k=W(o,"top","top")||W(ut,"top","top"),x=k?k.scrollTop:void 0;if(zt!==o&&(v=n[y],Ot=!1,Ut=!w&&s.invertSwap||_),0!==(m=function(t,e,n,r,i,a,o,s){var l=r?t.clientY:t.clientX,d=r?n.height:n.width,c=r?n.top:n.left,u=r?n.bottom:n.right,h=!1;if(!o)if(s&&Mt<d*i){if(!Ot&&(1===Rt?l>c+d*a/2:l<u-d*a/2)&&(Ot=!0),Ot)h=!0;else if(1===Rt?l<c+Mt:l>u-Mt)return-Rt}else if(l>c+d*(1-i)/2&&l<u-d*(1-i)/2)return function(t){return K(ut)<K(t)?1:-1}(e);if((h=h||o)&&(l<c+d*a/2||l>u-d*a/2))return l>c+d/2?1:-1;return 0}(t,o,n,i,w?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,Ut,zt===o))){var S=K(ut);do{S-=m,b=ht.children[S]}while(b&&("none"===j(b,"display")||b===ft))}if(0===m||b===o)return D(!1);zt=o,Rt=m;var C=o.nextElementSibling,I=!1,T=ne(gt,a,ut,e,o,n,t,I=1===m);if(!1!==T)return 1!==T&&-1!==T||(I=1===T),jt=!0,setTimeout(ie,30),B(),I&&!C?a.appendChild(ut):o.parentNode.insertBefore(ut,I?C:o),k&&et(k,0,x-k.scrollTop),ht=ut.parentNode,void 0===v||Ut||(Mt=Math.abs(v-q(o)[y])),z(),D(!0)}if(a.contains(ut))return D(!1)}return!1}function A(s,l){dt(s,f,E({evt:t,isOwner:c,axis:i?"vertical":"horizontal",revert:r,dragRect:e,targetRect:n,canSort:u,fromSortable:h,target:o,completed:D,onMove:function(n,r){return ne(gt,a,ut,e,n,q(n),t,r)},changed:z},l))}function B(){A("dragOverAnimationCapture"),f.captureAnimationState(),f!==h&&h.captureAnimationState()}function D(e){return A("dragOverCompleted",{insertion:e}),e&&(c?d._hideClone():d._showClone(f),f!==h&&(Z(ut,Et?Et.options.ghostClass:d.options.ghostClass,!1),Z(ut,s.ghostClass,!0)),Et!==f&&f!==ee.active?Et=f:f===ee.active&&Et&&(Et=null),h===f&&(f._ignoreWhileAnimating=o),f.animateAll((function(){A("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(o===ut&&!ut.animated||o===a&&!o.animated)&&(zt=null),s.dragoverBubble||t.rootEl||o===document||(ut.parentNode[rt]._isOutsideThisEl(t.target),!e&&Qt(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function z(){wt=K(ut),kt=K(ut,s.draggable),ct({sortable:f,name:"change",toEl:a,newIndex:wt,newDraggableIndex:kt,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){N(document,"mousemove",this._onTouchMove),N(document,"touchmove",this._onTouchMove),N(document,"pointermove",this._onTouchMove),N(document,"dragover",Qt),N(document,"mousemove",Qt),N(document,"touchmove",Qt)},_offUpEvents:function(){var t=this.el.ownerDocument;N(t,"mouseup",this._onDrop),N(t,"touchend",this._onDrop),N(t,"pointerup",this._onDrop),N(t,"touchcancel",this._onDrop),N(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;wt=K(ut),kt=K(ut,n.draggable),dt("drop",this,{evt:t}),ht=ut&&ut.parentNode,wt=K(ut),kt=K(ut,n.draggable),ee.eventCanceled||(Ft=!1,Ut=!1,Ot=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),se(this.cloneId),se(this._dragStartId),this.nativeDraggable&&(N(document,"drop",this),N(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),B&&j(document.body,"user-select",""),j(ut,"transform",""),t&&(Dt&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),ft&&ft.parentNode&&ft.parentNode.removeChild(ft),(gt===ht||Et&&"clone"!==Et.lastPutMode)&&vt&&vt.parentNode&&vt.parentNode.removeChild(vt),ut&&(this.nativeDraggable&&N(ut,"dragend",this),re(ut),ut.style["will-change"]="",Dt&&!Ft&&Z(ut,Et?Et.options.ghostClass:this.options.ghostClass,!1),Z(ut,this.options.chosenClass,!1),ct({sortable:this,name:"unchoose",toEl:ht,newIndex:null,newDraggableIndex:null,originalEvent:t}),gt!==ht?(wt>=0&&(ct({rootEl:ht,name:"add",toEl:ht,fromEl:gt,originalEvent:t}),ct({sortable:this,name:"remove",toEl:ht,originalEvent:t}),ct({rootEl:ht,name:"sort",toEl:ht,fromEl:gt,originalEvent:t}),ct({sortable:this,name:"sort",toEl:ht,originalEvent:t})),Et&&Et.save()):wt!==_t&&wt>=0&&(ct({sortable:this,name:"update",toEl:ht,originalEvent:t}),ct({sortable:this,name:"sort",toEl:ht,originalEvent:t})),ee.active&&(null!=wt&&-1!==wt||(wt=_t,kt=yt),ct({sortable:this,name:"end",toEl:ht,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){dt("nulling",this),gt=ut=ht=ft=pt=vt=mt=bt=St=Ct=Dt=wt=kt=_t=yt=zt=Rt=Et=xt=ee.dragged=ee.ghost=ee.clone=ee.active=null,Ht.forEach((function(t){t.checked=!0})),Ht.length=It=Tt=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":ut&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,r=0,i=n.length,a=this.options;r<i;r++)P(t=n[r],a.draggable,this.el,!1)&&e.push(t.getAttribute(a.dataIdAttr)||ae(t));return e},sort:function(t){var e={},n=this.el;this.toArray().forEach((function(t,r){var i=n.children[r];P(i,this.options.draggable,n,!1)&&(e[t]=i)}),this),t.forEach((function(t){e[t]&&(n.removeChild(e[t]),n.appendChild(e[t]))}))},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return P(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var r=st.modifyOption(this,t,e);n[t]=void 0!==r?r:e,"group"===t&&Kt(n)},destroy:function(){dt("destroy",this);var t=this.el;t[rt]=null,N(t,"mousedown",this._onTapStart),N(t,"touchstart",this._onTapStart),N(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(N(t,"dragover",this),N(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Pt.splice(Pt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!bt){if(dt("hideClone",this),ee.eventCanceled)return;j(vt,"display","none"),this.options.removeCloneOnHide&&vt.parentNode&&vt.parentNode.removeChild(vt),bt=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(bt){if(dt("showClone",this),ee.eventCanceled)return;gt.contains(ut)&&!this.options.group.revertClone?gt.insertBefore(vt,ut):pt?gt.insertBefore(vt,pt):gt.appendChild(vt),this.options.group.revertClone&&this.animate(ut,vt),j(vt,"display",""),bt=!1}}else this._hideClone()}},Xt&&M(document,"touchmove",(function(t){(ee.active||Ft)&&t.cancelable&&t.preventDefault()})),ee.utils={on:M,off:N,css:j,find:X,is:function(t,e){return!!P(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:tt,closest:P,toggleClass:Z,clone:nt,index:K,nextTick:oe,cancelNextTick:se,detectDirection:$t,getChild:G},ee.get=function(t){return t[rt]},ee.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(ee.utils=E({},ee.utils,t.utils)),st.mount(t)}))},ee.create=function(t,e){return new ee(t,e)},ee.version="1.10.2";var le,de,ce,ue,he,fe,ge=[],pe=!1;function me(){ge.forEach((function(t){clearInterval(t.pid)})),ge=[]}function ve(){clearInterval(fe)}var be=tt((function(t,e,n,r){if(e.scroll){var i,a=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,s=e.scrollSensitivity,l=e.scrollSpeed,d=Y(),c=!1;de!==n&&(de=n,me(),le=e.scroll,i=e.scrollFn,!0===le&&(le=J(n,!0)));var u=0,h=le;do{var f=h,g=q(f),p=g.top,m=g.bottom,v=g.left,b=g.right,_=g.width,w=g.height,y=void 0,k=void 0,x=f.scrollWidth,E=f.scrollHeight,S=j(f),C=f.scrollLeft,I=f.scrollTop;f===d?(y=_<x&&("auto"===S.overflowX||"scroll"===S.overflowX||"visible"===S.overflowX),k=w<E&&("auto"===S.overflowY||"scroll"===S.overflowY||"visible"===S.overflowY)):(y=_<x&&("auto"===S.overflowX||"scroll"===S.overflowX),k=w<E&&("auto"===S.overflowY||"scroll"===S.overflowY));var T=y&&(Math.abs(b-a)<=s&&C+_<x)-(Math.abs(v-a)<=s&&!!C),A=k&&(Math.abs(m-o)<=s&&I+w<E)-(Math.abs(p-o)<=s&&!!I);if(!ge[u])for(var B=0;B<=u;B++)ge[B]||(ge[B]={});ge[u].vx==T&&ge[u].vy==A&&ge[u].el===f||(ge[u].el=f,ge[u].vx=T,ge[u].vy=A,clearInterval(ge[u].pid),0==T&&0==A||(c=!0,ge[u].pid=setInterval(function(){r&&0===this.layer&&ee.active._onTouchMove(he);var e=ge[this.layer].vy?ge[this.layer].vy*l:0,n=ge[this.layer].vx?ge[this.layer].vx*l:0;"function"==typeof i&&"continue"!==i.call(ee.dragged.parentNode[rt],n,e,t,he,ge[this.layer].el)||et(ge[this.layer].el,n,e)}.bind({layer:u}),24))),u++}while(e.bubbleScroll&&h!==d&&(h=J(h,!1)));pe=c}}),30),_e=function(t){var e=t.originalEvent,n=t.putSortable,r=t.dragEl,i=t.activeSortable,a=t.dispatchSortableEvent,o=t.hideGhostForTarget,s=t.unhideGhostForTarget;if(e){var l=n||i;o();var d=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,c=document.elementFromPoint(d.clientX,d.clientY);s(),l&&!l.el.contains(c)&&(a("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function we(){}function ye(){}we.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=G(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(e,r):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:_e},x(we,{pluginName:"revertOnSpill"}),ye.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:_e},x(ye,{pluginName:"removeOnSpill"});ee.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?M(document,"dragover",this._handleAutoScroll):this.options.supportPointer?M(document,"pointermove",this._handleFallbackAutoScroll):e.touches?M(document,"touchmove",this._handleFallbackAutoScroll):M(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?N(document,"dragover",this._handleAutoScroll):(N(document,"pointermove",this._handleFallbackAutoScroll),N(document,"touchmove",this._handleFallbackAutoScroll),N(document,"mousemove",this._handleFallbackAutoScroll)),ve(),me(),clearTimeout(O),O=void 0},nulling:function(){he=de=le=pe=fe=ce=ue=null,ge.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var n=this,r=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(r,i);if(he=t,e||T||I||B){be(t,this.options,a,e);var o=J(a,!0);!pe||fe&&r===ce&&i===ue||(fe&&ve(),fe=setInterval((function(){var a=J(document.elementFromPoint(r,i),!0);a!==o&&(o=a,me()),be(t,n.options,a,e)}),10),ce=r,ue=i)}else{if(!this.options.bubbleScroll||J(a,!0)===Y())return void me();be(t,this.options,J(a,!1),!1)}}},x(t,{pluginName:"scroll",initializeByDefault:!0})}),ee.mount(ye,we);var ke=ee;const xe=d();function Ee(t,e){const n=xe.getCurrentBackgroundCanvas();e.innerHTML=null,t.forEach((r,i)=>{let a=1===t.length?"":`<button  class="deleteFrameButtons"><img data-id = ${i} class = "delete" src = "../dist/img/delete.png"></button>`;e.insertAdjacentHTML("beforeend",`\n            <li class="wrapper-frame" style = "background-image: url(${n})">\n              <div id="edit-frames-buttons">\n                <button class="id-frame">${i+1}</button>\n                <button class="duplicateFrameButtons"><img data-id=${i} class = "duplicate" src = "../dist/img/duplicate.png"></button>\n                 ${a}\n                </div>\n              <img src =${r} data-id=${i} class = "img-frame glyphicon glyphicon-move"> \n            </li> \n        `)})}function Se(t){const e=document.getElementById("fps-slider"),n=document.getElementById("display-fps");e.addEventListener("change",r=>{t.setCurrentFps(e.value),n.textContent=`${t.getCurrentFps()} FPS`})}n(11),n(22);const Ce=s();d();i(Ce,v),Se(v),Se(v),a(Ce),function(t){const e=document.getElementById("thickness-slider");e.addEventListener("change",(function(n){t.setProp("selectedThickness",e.value)}))}(Ce),function(t){const e=document.getElementById("drawing-canvas-container"),n=document.getElementById("parent-canvas"),r=document.getElementById("drawing-canvas"),i=document.getElementById("cabbage-skin-canvas"),a=document.getElementById("dot-overlay-canvas"),o=r.getContext("2d"),s=a.getContext("2d"),l=i.getContext("2d");let d=!1,c=!1,u=0,h=0,g=0,p=0,m=0,v=0;function b(e,n){const r=f(t.getProp("selectedTool"));(d||c)&&r(o,i,l,h,u,p,g,t.getProp("selectedThickness"),n,v,m)}function _(e,n){u=e.offsetY,h=e.offsetX,f(t.getProp("selectedTool"))(o,i,l,h,u,p,g,t.getProp("selectedThickness"),n,v,m)}!function(t,e){const n=document.getElementById("drawing-canvas"),r=document.getElementById("cabbage-skin-canvas"),i=document.getElementById("dot-overlay-canvas");n.height=t,n.width=e,r.height=t,r.width=e,i.height=t,i.width=e}(n.offsetHeight,n.offsetWidth),e.addEventListener("contextmenu",t=>{t.preventDefault()}),a.addEventListener("mousedown",e=>{if(1===e.buttons){d=!0,_(e,t.getProp("selectedLeftColor"))}else if(2===e.buttons){c=!0,_(e,t.getProp("selectedRightColor"))}}),a.addEventListener("mouseup",t=>{0===t.button?d=!1:2===t.button&&(c=!1),f("imposition")(r,i)}),a.addEventListener("mousemove",e=>{if(g=e.offsetY,p=e.offsetX,c){b(0,t.getProp("selectedRightColor"))}else if(d){b(0,t.getProp("selectedLeftColor"))}m=g,v=p;const n=t.getProp("selectedThickness");f("followSquare")(a,s,p,g,n)}),a.addEventListener("mouseout",t=>{s.clearRect(0,0,a.width,a.height),d=!1,c=!1})}(Ce),function(t){const e=document.getElementById("color"),n=document.getElementById("right-color"),r=(document.getElementById("color-panel"),localStorage.getItem("leftColor")||e.value);e.value=r;const i=localStorage.getItem("rightColor")||n.value;n.value=i,t.setProp("selectedRightColor",i),t.setProp("selectedLeftColor",r),g(t,e,"selectedLeftColor","leftColor"),g(t,n,"selectedRightColor","rightColor")}(Ce),function(t){const e=document.getElementById("add-img"),n=document.getElementById("drawing-canvas"),r=n.getContext("2d"),i=JSON.parse(localStorage.getItem("imgCanvas"))||[];v.pushFrames(i),_(localStorage.getItem("theme")||w.getCurrentBackgroundCanvas()),window.onbeforeunload=function(){localStorage.setItem("imgCanvas",JSON.stringify(v.getFrames())),localStorage.setItem("theme",w.getCurrentBackgroundCanvas())},window.onload=function(){const e=v.getFrames()[0],i=document.getElementById(`${t.getProp("selectedTool")}`),a=document.querySelectorAll(".img-frame");w.setCurrentSrcCanvas(e),w.setIdCurrentFrame(0),a[0].classList.add("selectedButton");const o=new Image;o.src=e,r.drawImage(o,0,0,n.width,n.height),i.classList.add("selectedButton")},e.addEventListener("change",()=>{const t=new FileReader;t.onload=function(){const e=new Image;e.onload=function(){n.height=e.height,n.width=e.width,r.drawImage(e,0,0,n.width,n.height)},e.src=t.result},t.readAsDataURL(e.files[0])}),document.getElementById("butt-save-img").addEventListener("click",()=>{n.toBlob((function(t){let e=document.createElement("a");e.href=URL.createObjectURL(t),document.body.appendChild(e),e.download="image.png",e.click(),document.body.removeChild(e)}),"image/png")}),document.getElementById("butt-delete-img").addEventListener("click",()=>{r.clearRect(0,0,n.width,n.height)})}(Ce),function(){const t=document.getElementById("drawing-canvas"),e=document.getElementById("addFrameButton"),n=document.getElementById("dot-overlay-canvas"),r=t.getContext("2d"),i=document.getElementById("list-frames"),a=v.getFrames();document.getElementById("choiceBackground").addEventListener("click",t=>{if("choiceBackground"===t.target.id);else{xe.setCurrentBackgroundCanvas(`../dist/img/${t.target.id}.png`);const e=xe.getCurrentBackgroundCanvas();Ee(a,i),_(e)}});const o=document.getElementById("rotate"),s=document.getElementById("flip");o.addEventListener("click",e=>{r.clearRect(0,0,t.width,t.height);const n=new Image;n.src=xe.getCurrentSrcCanvas();const o=xe.getIdCurrentFrame();r.save(),r.translate(t.width/2,t.height/2),r.rotate(90*Math.PI/180),r.drawImage(n,-t.width/2,-t.height/2),r.translate(-t.width/2,-t.height/2),r.restore();const s=t.toDataURL();v.updateFrame(o,s),xe.setCurrentSrcCanvas(s),Ee(a,i)}),s.addEventListener("click",e=>{r.clearRect(0,0,t.width,t.height);const n=new Image;n.src=xe.getCurrentSrcCanvas();const o=xe.getIdCurrentFrame();r.save(),r.scale(-1,1),r.drawImage(n,0,0,-1*n.width,n.height),r.restore();const s=t.toDataURL();v.updateFrame(o,s),xe.setCurrentSrcCanvas(s),Ee(a,i)});const l=document.createElement("canvas");!function(){if(0===v.getFrames().length){const e=t.toDataURL();v.pushFrame(e),xe.setCurrentSrcCanvas(e),xe.setIdCurrentFrame(0)}Ee(a,i)}(),e.addEventListener("click",e=>{l.width=t.width,l.height=t.height;const n=l.toDataURL();v.pushFrame(n),Ee(a,i);const o=document.querySelectorAll(".img-frame"),s=v.getFrames().length-1;o[s].classList.add("selectedButton"),r.clearRect(0,0,t.width,t.height),xe.setCurrentSrcCanvas(v.getFrames()[s]),xe.setIdCurrentFrame(s)}),i.addEventListener("click",e=>{if(e.target.classList.contains("delete")){const n=e.target.dataset.id;v.deleteFrame(n),Ee(a,i),r.clearRect(0,0,t.width,t.height)}if(e.target.classList.contains("duplicate")){const t=e.target.dataset.id;v.duplicateFrame(t),Ee(a,i)}if(e.target.classList.contains("img-frame")){const n=document.querySelectorAll(".img-frame");!function(t,e){t.forEach(t=>{t.classList.remove("selectedButton")}),e.target.classList.add("selectedButton")}(n,e),r.clearRect(0,0,t.width,t.height);const i=e.target.dataset.id;xe.setIdCurrentFrame(i),xe.setCurrentSrcCanvas(n[i].src);const a=new Image;a.src=xe.getCurrentSrcCanvas(),r.drawImage(a,0,0,t.width,t.height)}}),n.addEventListener("mouseup",e=>{const n=document.querySelectorAll(".img-frame"),r=xe.getIdCurrentFrame();xe.setCurrentSrcCanvas(t.toDataURL());const i=xe.getCurrentSrcCanvas();n[r].src=i,v.updateFrame(r,i)}),ke.create(i,{handle:".glyphicon-move",animation:150,onEnd:function(t){const e=t.oldIndex,n=t.newIndex;v.replaceFrame(e,n),Ee(a,i)}})}(),function(){const t=document.getElementById("animatedFrame");let e=0;!function n(){const r=v.getCurrentFps();setTimeout((function(){requestAnimationFrame(n)}),1e3/r);const i=v.getFrames(),a=function(t){return t[e]&&e<t.length-1?(e+=1,e):e===t.length-1?(e=0,e):void 0}(i);!function(e,n){t.src=e[n]}(i,a)}()}()}]);